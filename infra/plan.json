{"format_version":"1.2","terraform_version":"1.6.0","planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.api_gateway.aws_api_gateway_deployment.deployment","mode":"managed","type":"aws_api_gateway_deployment","name":"deployment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"canary_settings":[],"created_date":"2025-01-17T01:13:37Z","description":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/","id":"shht3k","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/","rest_api_id":"cfxtq5juk3","stage_description":null,"stage_name":null,"triggers":null,"variables":null},"sensitive_values":{"canary_settings":[]}},{"address":"module.api_gateway.aws_api_gateway_integration.post_proposal_lambda","mode":"managed","type":"aws_api_gateway_integration","name":"post_proposal_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cache_key_parameters":[],"cache_namespace":"8mpfy6","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"POST","id":"agi-cfxtq5juk3-8mpfy6-POST","integration_http_method":"POST","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":{},"request_templates":{},"resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations/invocations"},"sensitive_values":{"cache_key_parameters":[],"request_parameters":{},"request_templates":{},"tls_config":[]}},{"address":"module.api_gateway.aws_api_gateway_method.post_proposal","mode":"managed","type":"aws_api_gateway_method","name":"post_proposal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_required":false,"authorization":"NONE","authorization_scopes":[],"authorizer_id":"","http_method":"POST","id":"agm-cfxtq5juk3-8mpfy6-POST","operation_name":"","request_models":{},"request_parameters":{},"request_validator_id":"","resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3"},"sensitive_values":{"authorization_scopes":[],"request_models":{},"request_parameters":{}}},{"address":"module.api_gateway.aws_api_gateway_resource.proposals","mode":"managed","type":"aws_api_gateway_resource","name":"proposals","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"8mpfy6","parent_id":"ie8b3kn5za","path":"/proposals","path_part":"proposals","rest_api_id":"cfxtq5juk3"},"sensitive_values":{}},{"address":"module.api_gateway.aws_api_gateway_rest_api.proposal_api","mode":"managed","type":"aws_api_gateway_rest_api","name":"proposal_api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_source":"HEADER","arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3","binary_media_types":[],"body":null,"created_date":"2025-01-16T20:03:17Z","description":"API Gateway para gerenciar propostas","disable_execute_api_endpoint":false,"endpoint_configuration":[{"types":["REGIONAL"],"vpc_endpoint_ids":[]}],"execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3","fail_on_warnings":null,"id":"cfxtq5juk3","minimum_compression_size":"","name":"proposal-api","parameters":null,"policy":"","put_rest_api_mode":null,"root_resource_id":"ie8b3kn5za","tags":{},"tags_all":{}},"sensitive_values":{"binary_media_types":[],"endpoint_configuration":[{"types":[false],"vpc_endpoint_ids":[]}],"tags":{},"tags_all":{}}},{"address":"module.api_gateway.aws_api_gateway_stage.dev","mode":"managed","type":"aws_api_gateway_stage","name":"dev","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_log_settings":[{"destination_arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","format":"{\"extendedRequestId\":\"$context.extendedRequestId\",\"httpMethod\":\"$context.httpMethod\",\"integrationErrorMessage\":\"$context.integration.error\",\"integrationLatency\":\"$context.integration.latency\",\"integrationStatus\":\"$context.integration.status\",\"ip\":\"$context.identity.sourceIp\",\"requestId\":\"$context.requestId\",\"requestTime\":\"$context.requestTime\",\"resourcePath\":\"$context.resourcePath\",\"responseLength\":\"$context.responseLength\",\"status\":\"$context.status\"}"}],"arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3/stages/dev","cache_cluster_enabled":false,"cache_cluster_size":"","canary_settings":[],"client_certificate_id":"","deployment_id":"bivpg9","description":"","documentation_version":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/dev","id":"ags-cfxtq5juk3-dev","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/dev","rest_api_id":"cfxtq5juk3","stage_name":"dev","tags":{},"tags_all":{},"variables":{},"web_acl_arn":"","xray_tracing_enabled":false},"sensitive_values":{"access_log_settings":[{}],"canary_settings":[],"tags":{},"tags_all":{},"variables":{}}},{"address":"module.api_gateway.aws_cloudwatch_log_group.apigateway_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"apigateway_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","id":"/aws/apigateway/proposal-api","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/apigateway/proposal-api","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","Service":"API Gateway"},"tags_all":{"Environment":"production","Service":"API Gateway"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_gateway.aws_iam_policy_attachment.apigateway_xray","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_xray","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":[],"id":"APIGatewayXRayPolicyAttachment","name":"APIGatewayXRayPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess","roles":["APIGatewayXRayRole"],"users":[]},"sensitive_values":{"groups":[],"roles":[false],"users":[]}},{"address":"module.api_gateway.aws_iam_role.apigateway_xray_role","mode":"managed","type":"aws_iam_role","name":"apigateway_xray_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:role/APIGatewayXRayRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayXRayRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"],"max_session_duration":3600,"name":"APIGatewayXRayRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMFL42DVR5R"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}},{"address":"module.api_gateway.random_id.unique_id","mode":"managed","type":"random_id","name":"unique_id","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"IK3TAw==","b64_url":"IK3TAw","byte_length":4,"dec":"548262659","hex":"20add303","id":"IK3TAw","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.api_gateway"},{"resources":[{"address":"module.dynamodb.aws_dynamodb_table.proposals","mode":"managed","type":"aws_dynamodb_table","name":"proposals","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table","attribute":[{"name":"created_at","type":"N"},{"name":"proposal_id","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"proposal_id","id":"proposals_table","import_table":[],"local_secondary_index":[],"name":"proposals_table","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":true}],"range_key":"created_at","read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[{"enabled":true,"kms_key_arn":""}],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Environment":"Production"},"tags_all":{"Environment":"Production"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"sensitive_values":{"attribute":[{},{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[{}],"tags":{},"tags_all":{},"ttl":[{}]}}],"address":"module.dynamodb"},{"resources":[{"address":"module.lambda.aws_cloudwatch_log_group.lambda_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/lambda/store-proposal","id":"/aws/lambda/store-proposal","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/store-proposal","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_dynamodb_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_dynamodb_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","attachment_count":1,"description":"Permite que a Lambda armazene dados no DynamoDB","id":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","name":"LambdaDynamoDBAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:GetItem\",\"dynamodb:UpdateItem\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMD523FOAV5","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_rds_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_rds_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","attachment_count":1,"description":"Permite que a Lambda acesse o RDS PostgreSQL","id":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","name":"LambdaRDSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"rds:DescribeDBInstances\",\"rds:Connect\",\"rds:DescribeDBClusters\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:rds:us-east-1:615026068056:db:contract-db\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMNN2W77VLR","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_sns_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_sns_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","attachment_count":1,"description":"Permite que a Lambda publique mensagens no SNS","id":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","name":"LambdaSNSPublishPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sns:Publish\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMBRNIQ7E6F","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_sqs_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","attachment_count":1,"description":"Permissões para a Lambda ler mensagens do SQS","id":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","name":"LambdaSQSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMCRZEKXD6U","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T20:03:17Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","arn:aws:iam::615026068056:policy/service-role/AWSLambdaTracerAccessExecutionRole-ffce4563-6c03-47f2-b84e-8bb6f54da999","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMINKSMLVPD"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false,false,false,false,false,false],"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_dynamodb_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_dynamodb_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117011600035800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_logging","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_logging","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117003910430700000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_rds_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_rds_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117043734304800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_sns_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sns_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117011736515800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_sqs_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250116214549361400000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","role":"lambda_exec_role"},"sensitive_values":{}},{"address":"module.lambda.aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:100776f9-d001-4059-b7ad-0e08275d9b49","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"100776f9-d001-4059-b7ad-0e08275d9b49","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"100776f9-d001-4059-b7ad-0e08275d9b49"},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]}},{"address":"module.lambda.aws_lambda_function.process_sqs_postgres","mode":"managed","type":"aws_lambda_function","name":"process_sqs_postgres","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","code_sha256":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","DB_NAME":"contracts","DB_PASSWORD":"supersecretpassword","DB_USER":"contract_user","SQS_QUEUE_URL":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/process_sqs_postgres.zip","function_name":"process-sqs-postgres","handler":"process_sqs_postgres.lambda_handler","id":"process-sqs-postgres","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres/invocations","kms_key_arn":"","last_modified":"2025-01-17T05:06:52.000+0000","layers":["arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/process-sqs-postgres","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","source_code_size":27562324,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"Active"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{"DB_PASSWORD":true}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}},{"address":"module.lambda.aws_lambda_function.store_proposal","mode":"managed","type":"aws_lambda_function","name":"store_proposal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal","code_sha256":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"SNS_TOPIC_ARN":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","TABLE_NAME":"proposals_table"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/store_proposal.zip","function_name":"store-proposal","handler":"store_proposal.lambda_handler","id":"store-proposal","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations","kms_key_arn":"","last_modified":"2025-01-17T01:13:31.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/store-proposal","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","source_code_size":1070,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}},{"address":"module.lambda.aws_lambda_permission.apigw_lambda","mode":"managed","type":"aws_lambda_permission","name":"apigw_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"store-proposal","function_url_auth_type":null,"id":"AllowAPIGatewayInvoke-233ae465","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/*/*","statement_id":"AllowAPIGatewayInvoke-233ae465","statement_id_prefix":""},"sensitive_values":{}},{"address":"module.lambda.random_id.unique_id","mode":"managed","type":"random_id","name":"unique_id","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"IzrkZQ==","b64_url":"IzrkZQ","byte_length":4,"dec":"591062117","hex":"233ae465","id":"IzrkZQ","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.lambda","child_modules":[{"resources":[{"address":"module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:05.433+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"1"},"sensitive_values":{"compatible_architectures":[],"compatible_runtimes":[false]}}],"address":"module.lambda.module.lambda_layer"}]},{"resources":[{"address":"module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:09.687+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"2"},"sensitive_values":{"compatible_architectures":[],"compatible_runtimes":[false]}}],"address":"module.lambda_layer"},{"resources":[{"address":"module.monitoring.aws_cloudwatch_metric_alarm.dlq_alarm","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"dlq_alarm","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"],"alarm_description":"Alerta para mensagens na DLQ","alarm_name":"DLQMessageCountAlarm","arn":"arn:aws:cloudwatch:us-east-1:615026068056:alarm:DLQMessageCountAlarm","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{},"evaluate_low_sample_count_percentiles":"","evaluation_periods":1,"extended_statistic":"","id":"DLQMessageCountAlarm","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfMessagesVisible","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":300,"statistic":"Sum","tags":{},"tags_all":{},"threshold":10,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.monitoring.aws_iam_policy_attachment.apigateway_cloudwatch","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_cloudwatch","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":[],"id":"APIGatewayCloudWatchPolicyAttachment","name":"APIGatewayCloudWatchPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs","roles":["APIGatewayCloudWatchRole"],"users":[]},"sensitive_values":{"groups":[],"roles":[false],"users":[]}},{"address":"module.monitoring.aws_iam_role.apigateway_cloudwatch_role","mode":"managed","type":"aws_iam_role","name":"apigateway_cloudwatch_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:role/APIGatewayCloudWatchRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayCloudWatchRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"],"max_session_duration":3600,"name":"APIGatewayCloudWatchRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMGO367BDPW"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}}],"address":"module.monitoring"},{"resources":[{"address":"module.rds.aws_db_instance.postgresql","mode":"managed","type":"aws_db_instance","name":"postgresql","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"address":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"arn":"arn:aws:rds:us-east-1:615026068056:db:contract-db","auto_minor_version_upgrade":true,"availability_zone":"us-east-1a","backup_retention_period":0,"backup_target":"region","backup_window":"06:32-07:02","blue_green_update":[],"ca_cert_identifier":"rds-ca-rsa2048-g1","character_set_name":"","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","customer_owned_ip_enabled":false,"db_name":"","db_subnet_group_name":"rds-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_auth_secret_arn":"","domain_dns_ips":[],"domain_fqdn":"","domain_iam_role_name":"","domain_ou":"","enabled_cloudwatch_logs_exports":[],"endpoint":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com:5432","engine":"postgres","engine_lifecycle_support":"open-source-rds-extended-support","engine_version":"14","engine_version_actual":"14.12","final_snapshot_identifier":null,"hosted_zone_id":"Z2R2ITUGPM61AM","iam_database_authentication_enabled":false,"id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","identifier":"contract-db","identifier_prefix":"","instance_class":"db.t3.micro","iops":0,"kms_key_id":"","latest_restorable_time":"","license_model":"postgresql-license","listener_endpoint":[],"maintenance_window":"sat:03:19-sat:03:49","manage_master_user_password":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"nchar_character_set_name":"","network_type":"IPV4","option_group_name":"default:postgres-14","parameter_group_name":"default.postgres14","password":"supersecretpassword","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":true,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":false,"storage_throughput":0,"storage_type":"gp2","tags":{},"tags_all":{},"timeouts":null,"timezone":"","upgrade_storage_config":null,"username":"contract_user","vpc_security_group_ids":["sg-003715bff4616fce6"]},"sensitive_values":{"blue_green_update":[],"domain_dns_ips":[],"enabled_cloudwatch_logs_exports":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}},{"address":"module.rds.aws_db_subnet_group.main","mode":"managed","type":"aws_db_subnet_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-east-1:615026068056:subgrp:rds-subnet-group","description":"Managed by Terraform","id":"rds-subnet-group","name":"rds-subnet-group","name_prefix":"","subnet_ids":["subnet-0957e80fd53730ce3","subnet-0ae25846c7ba0f2d0"],"supported_network_types":["IPV4"],"tags":{},"tags_all":{},"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}}},{"address":"module.rds.aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-0bdb7f64665ad1375","description":"Permitir acesso ao PostgreSQL","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0bdb7f64665ad1375","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"rds-security-group","name_prefix":"","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0dc09828b95914ee3"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.rds"},{"resources":[{"address":"module.sns.aws_sns_topic.proposal_sns_topic","mode":"managed","type":"aws_sns_topic","name":"proposal_sns_topic","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"proposal_sns_topic","name_prefix":"","owner":"615026068056","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"615026068056\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sns.aws_sns_topic_subscription.sqs_subscription","mode":"managed","type":"aws_sns_topic_subscription","name":"sqs_subscription","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":true,"delivery_policy":"","endpoint":"arn:aws:sqs:us-east-1:615026068056:contract-queue","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","owner_id":"615026068056","pending_confirmation":false,"protocol":"sqs","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"},"sensitive_values":{}},{"address":"module.sns.aws_sqs_queue_policy.sns_to_sqs_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"sns_to_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"},"sensitive_values":{}}],"address":"module.sns"},{"resources":[{"address":"module.sqs.aws_iam_policy.sqs_policy","mode":"managed","type":"aws_iam_policy","name":"sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/sqs-policy","attachment_count":0,"description":"Permissões para acessar filas SQS","id":"arn:aws:iam::615026068056:policy/sqs-policy","name":"sqs-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:SendMessage\",\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:sqs:us-east-1:615026068056:contract-queue\",\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"arn:aws:sqs:us-east-1:615026068056:status-queue\",\"arn:aws:sqs:us-east-1:615026068056:status-dlq\"]}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMDR4WQYZVW","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sqs.aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c"},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]}},{"address":"module.sqs.aws_sqs_queue.contract_dlq","mode":"managed","type":"aws_sqs_queue","name":"contract_dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"contract-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sqs.aws_sqs_queue.contract_queue","mode":"managed","type":"aws_sqs_queue","name":"contract_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"contract-queue","name_prefix":"","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sqs.aws_sqs_queue.status_dlq","mode":"managed","type":"aws_sqs_queue","name":"status_dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"status-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sqs.aws_sqs_queue.status_queue","mode":"managed","type":"aws_sqs_queue","name":"status_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"status-queue","name_prefix":"","policy":"","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:status-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.sqs"},{"resources":[{"address":"module.vpc.aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:internet-gateway/igw-012300bde1b5582ba","id":"igw-012300bde1b5582ba","owner_id":"615026068056","tags":{"Name":"Internet Gateway"},"tags_all":{"Name":"Internet Gateway"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:route-table/rtb-0bdbf74be69f29231","id":"rtb-0bdbf74be69f29231","owner_id":"615026068056","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-012300bde1b5582ba","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"Public Route Table"},"tags_all":{"Name":"Public Route Table"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.public_1","mode":"managed","type":"aws_route_table_association","name":"public_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0a67afc9e9f4dce6a","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-046050642801757a0","timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public_2","mode":"managed","type":"aws_route_table_association","name":"public_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-010ce294e29cc808b","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-0685068774fd6de78","timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-003715bff4616fce6","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-003715bff4616fce6","ingress":[{"cidr_blocks":["192.168.1.1/32"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"terraform-20250116201417992500000001","name_prefix":"terraform-","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{"Name":"RDS Security Group"},"tags_all":{"Name":"RDS Security Group"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private_1","mode":"managed","type":"aws_subnet","name":"private_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0957e80fd53730ce3","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0957e80fd53730ce3","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 1"},"tags_all":{"Name":"Private Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private_2","mode":"managed","type":"aws_subnet","name":"private_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0ae25846c7ba0f2d0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ae25846c7ba0f2d0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 2"},"tags_all":{"Name":"Private Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public_1","mode":"managed","type":"aws_subnet","name":"public_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-046050642801757a0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-046050642801757a0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 1"},"tags_all":{"Name":"Public Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public_2","mode":"managed","type":"aws_subnet","name":"public_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0685068774fd6de78","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0685068774fd6de78","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 2"},"tags_all":{"Name":"Public Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:vpc/vpc-01d5aeaa024d0582e","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08b56c6c4bd779c79","default_route_table_id":"rtb-095076ccc78541141","default_security_group_id":"sg-05fce1664b336d045","dhcp_options_id":"dopt-00dd9381230e00a27","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-01d5aeaa024d0582e","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-095076ccc78541141","owner_id":"615026068056","tags":{"Name":"main-vpc"},"tags_all":{"Name":"main-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_drift":[{"address":"module.lambda.aws_iam_role.lambda_exec","module_address":"module.lambda","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:iam::615026068056:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T20:03:17Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMINKSMLVPD"},"after":{"arn":"arn:aws:iam::615026068056:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T20:03:17Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","arn:aws:iam::615026068056:policy/service-role/AWSLambdaTracerAccessExecutionRole-ffce4563-6c03-47f2-b84e-8bb6f54da999","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMINKSMLVPD"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false,false,false,false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false,false,false,false,false],"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_lambda_function.process_sqs_postgres","module_address":"module.lambda","mode":"managed","type":"aws_lambda_function","name":"process_sqs_postgres","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","code_sha256":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","DB_NAME":"contracts","DB_PASSWORD":"supersecretpassword","DB_USER":"contract_user","SQS_QUEUE_URL":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/process_sqs_postgres.zip","function_name":"process-sqs-postgres","handler":"process_sqs_postgres.lambda_handler","id":"process-sqs-postgres","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres/invocations","kms_key_arn":"","last_modified":"2025-01-17T04:54:28.000+0000","layers":["arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/process-sqs-postgres","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","source_code_size":27562324,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","code_sha256":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","DB_NAME":"contracts","DB_PASSWORD":"supersecretpassword","DB_USER":"contract_user","SQS_QUEUE_URL":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/process_sqs_postgres.zip","function_name":"process-sqs-postgres","handler":"process_sqs_postgres.lambda_handler","id":"process-sqs-postgres","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres/invocations","kms_key_arn":"","last_modified":"2025-01-17T05:06:52.000+0000","layers":["arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","arn:aws:lambda:us-east-1:580247275435:layer:LambdaInsightsExtension:53"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/process-sqs-postgres","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","source_code_size":27562324,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"Active"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{},"before_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{"DB_PASSWORD":true}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"after_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{"DB_PASSWORD":true}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false,false],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}}},{"address":"module.vpc.aws_security_group.rds_sg","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-003715bff4616fce6","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-003715bff4616fce6","ingress":[{"cidr_blocks":["192.168.1.1/32"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"terraform-20250116201417992500000001","name_prefix":"terraform-","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{"Name":"RDS Security Group"},"tags_all":{"Name":"RDS Security Group"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-003715bff4616fce6","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-003715bff4616fce6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-20250116201417992500000001","name_prefix":"terraform-","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{"Name":"RDS Security Group"},"tags_all":{"Name":"RDS Security Group"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}}],"resource_changes":[{"address":"module.api_gateway.aws_api_gateway_deployment.deployment","module_address":"module.api_gateway","mode":"managed","type":"aws_api_gateway_deployment","name":"deployment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"canary_settings":[],"created_date":"2025-01-17T01:13:37Z","description":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/","id":"shht3k","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/","rest_api_id":"cfxtq5juk3","stage_description":null,"stage_name":null,"triggers":null,"variables":null},"after":{"canary_settings":[],"created_date":"2025-01-17T01:13:37Z","description":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/","id":"shht3k","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/","rest_api_id":"cfxtq5juk3","stage_description":null,"stage_name":null,"triggers":null,"variables":null},"after_unknown":{},"before_sensitive":{"canary_settings":[]},"after_sensitive":{"canary_settings":[]}}},{"address":"module.api_gateway.aws_api_gateway_integration.post_proposal_lambda","module_address":"module.api_gateway","mode":"managed","type":"aws_api_gateway_integration","name":"post_proposal_lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"cache_key_parameters":[],"cache_namespace":"8mpfy6","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"POST","id":"agi-cfxtq5juk3-8mpfy6-POST","integration_http_method":"POST","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":{},"request_templates":{},"resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations/invocations"},"after":{"cache_key_parameters":[],"cache_namespace":"8mpfy6","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"POST","id":"agi-cfxtq5juk3-8mpfy6-POST","integration_http_method":"POST","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":{},"request_templates":{},"resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations/invocations"},"after_unknown":{},"before_sensitive":{"cache_key_parameters":[],"request_parameters":{},"request_templates":{},"tls_config":[]},"after_sensitive":{"cache_key_parameters":[],"request_parameters":{},"request_templates":{},"tls_config":[]}}},{"address":"module.api_gateway.aws_api_gateway_method.post_proposal","module_address":"module.api_gateway","mode":"managed","type":"aws_api_gateway_method","name":"post_proposal","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"api_key_required":false,"authorization":"NONE","authorization_scopes":[],"authorizer_id":"","http_method":"POST","id":"agm-cfxtq5juk3-8mpfy6-POST","operation_name":"","request_models":{},"request_parameters":{},"request_validator_id":"","resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3"},"after":{"api_key_required":false,"authorization":"NONE","authorization_scopes":[],"authorizer_id":"","http_method":"POST","id":"agm-cfxtq5juk3-8mpfy6-POST","operation_name":"","request_models":{},"request_parameters":{},"request_validator_id":"","resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3"},"after_unknown":{},"before_sensitive":{"authorization_scopes":[],"request_models":{},"request_parameters":{}},"after_sensitive":{"authorization_scopes":[],"request_models":{},"request_parameters":{}}}},{"address":"module.api_gateway.aws_api_gateway_resource.proposals","module_address":"module.api_gateway","mode":"managed","type":"aws_api_gateway_resource","name":"proposals","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"8mpfy6","parent_id":"ie8b3kn5za","path":"/proposals","path_part":"proposals","rest_api_id":"cfxtq5juk3"},"after":{"id":"8mpfy6","parent_id":"ie8b3kn5za","path":"/proposals","path_part":"proposals","rest_api_id":"cfxtq5juk3"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.api_gateway.aws_api_gateway_rest_api.proposal_api","module_address":"module.api_gateway","mode":"managed","type":"aws_api_gateway_rest_api","name":"proposal_api","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"api_key_source":"HEADER","arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3","binary_media_types":[],"body":null,"created_date":"2025-01-16T20:03:17Z","description":"API Gateway para gerenciar propostas","disable_execute_api_endpoint":false,"endpoint_configuration":[{"types":["REGIONAL"],"vpc_endpoint_ids":[]}],"execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3","fail_on_warnings":null,"id":"cfxtq5juk3","minimum_compression_size":"","name":"proposal-api","parameters":null,"policy":"","put_rest_api_mode":null,"root_resource_id":"ie8b3kn5za","tags":{},"tags_all":{}},"after":{"api_key_source":"HEADER","arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3","binary_media_types":[],"body":null,"created_date":"2025-01-16T20:03:17Z","description":"API Gateway para gerenciar propostas","disable_execute_api_endpoint":false,"endpoint_configuration":[{"types":["REGIONAL"],"vpc_endpoint_ids":[]}],"execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3","fail_on_warnings":null,"id":"cfxtq5juk3","minimum_compression_size":"","name":"proposal-api","parameters":null,"policy":"","put_rest_api_mode":null,"root_resource_id":"ie8b3kn5za","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"binary_media_types":[],"endpoint_configuration":[{"types":[false],"vpc_endpoint_ids":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"binary_media_types":[],"endpoint_configuration":[{"types":[false],"vpc_endpoint_ids":[]}],"tags":{},"tags_all":{}}}},{"address":"module.api_gateway.aws_api_gateway_stage.dev","module_address":"module.api_gateway","mode":"managed","type":"aws_api_gateway_stage","name":"dev","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"access_log_settings":[{"destination_arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","format":"{\"extendedRequestId\":\"$context.extendedRequestId\",\"httpMethod\":\"$context.httpMethod\",\"integrationErrorMessage\":\"$context.integration.error\",\"integrationLatency\":\"$context.integration.latency\",\"integrationStatus\":\"$context.integration.status\",\"ip\":\"$context.identity.sourceIp\",\"requestId\":\"$context.requestId\",\"requestTime\":\"$context.requestTime\",\"resourcePath\":\"$context.resourcePath\",\"responseLength\":\"$context.responseLength\",\"status\":\"$context.status\"}"}],"arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3/stages/dev","cache_cluster_enabled":false,"cache_cluster_size":"","canary_settings":[],"client_certificate_id":"","deployment_id":"bivpg9","description":"","documentation_version":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/dev","id":"ags-cfxtq5juk3-dev","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/dev","rest_api_id":"cfxtq5juk3","stage_name":"dev","tags":{},"tags_all":{},"variables":{},"web_acl_arn":"","xray_tracing_enabled":false},"after":{"access_log_settings":[{"destination_arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","format":"{\"extendedRequestId\":\"$context.extendedRequestId\",\"httpMethod\":\"$context.httpMethod\",\"integrationErrorMessage\":\"$context.integration.error\",\"integrationLatency\":\"$context.integration.latency\",\"integrationStatus\":\"$context.integration.status\",\"ip\":\"$context.identity.sourceIp\",\"requestId\":\"$context.requestId\",\"requestTime\":\"$context.requestTime\",\"resourcePath\":\"$context.resourcePath\",\"responseLength\":\"$context.responseLength\",\"status\":\"$context.status\"}"}],"arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3/stages/dev","cache_cluster_enabled":false,"cache_cluster_size":"","canary_settings":[],"client_certificate_id":"","deployment_id":"bivpg9","description":"","documentation_version":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/dev","id":"ags-cfxtq5juk3-dev","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/dev","rest_api_id":"cfxtq5juk3","stage_name":"dev","tags":{},"tags_all":{},"variables":{},"web_acl_arn":"","xray_tracing_enabled":false},"after_unknown":{},"before_sensitive":{"access_log_settings":[{}],"canary_settings":[],"tags":{},"tags_all":{},"variables":{}},"after_sensitive":{"access_log_settings":[{}],"canary_settings":[],"tags":{},"tags_all":{},"variables":{}}}},{"address":"module.api_gateway.aws_cloudwatch_log_group.apigateway_logs","module_address":"module.api_gateway","mode":"managed","type":"aws_cloudwatch_log_group","name":"apigateway_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","id":"/aws/apigateway/proposal-api","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/apigateway/proposal-api","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","Service":"API Gateway"},"tags_all":{"Environment":"production","Service":"API Gateway"}},"after":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","id":"/aws/apigateway/proposal-api","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/apigateway/proposal-api","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","Service":"API Gateway"},"tags_all":{"Environment":"production","Service":"API Gateway"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.api_gateway.aws_iam_policy_attachment.apigateway_xray","module_address":"module.api_gateway","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_xray","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"groups":[],"id":"APIGatewayXRayPolicyAttachment","name":"APIGatewayXRayPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess","roles":["APIGatewayXRayRole"],"users":[]},"after":{"groups":[],"id":"APIGatewayXRayPolicyAttachment","name":"APIGatewayXRayPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess","roles":["APIGatewayXRayRole"],"users":[]},"after_unknown":{},"before_sensitive":{"groups":[],"roles":[false],"users":[]},"after_sensitive":{"groups":[],"roles":[false],"users":[]}}},{"address":"module.api_gateway.aws_iam_role.apigateway_xray_role","module_address":"module.api_gateway","mode":"managed","type":"aws_iam_role","name":"apigateway_xray_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:role/APIGatewayXRayRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayXRayRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"],"max_session_duration":3600,"name":"APIGatewayXRayRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMFL42DVR5R"},"after":{"arn":"arn:aws:iam::615026068056:role/APIGatewayXRayRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayXRayRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"],"max_session_duration":3600,"name":"APIGatewayXRayRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMFL42DVR5R"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}}},{"address":"module.api_gateway.random_id.unique_id","module_address":"module.api_gateway","mode":"managed","type":"random_id","name":"unique_id","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"b64_std":"IK3TAw==","b64_url":"IK3TAw","byte_length":4,"dec":"548262659","hex":"20add303","id":"IK3TAw","keepers":null,"prefix":null},"after":{"b64_std":"IK3TAw==","b64_url":"IK3TAw","byte_length":4,"dec":"548262659","hex":"20add303","id":"IK3TAw","keepers":null,"prefix":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.dynamodb.aws_dynamodb_table.proposals","module_address":"module.dynamodb","mode":"managed","type":"aws_dynamodb_table","name":"proposals","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table","attribute":[{"name":"created_at","type":"N"},{"name":"proposal_id","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"proposal_id","id":"proposals_table","import_table":[],"local_secondary_index":[],"name":"proposals_table","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":true}],"range_key":"created_at","read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[{"enabled":true,"kms_key_arn":""}],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Environment":"Production"},"tags_all":{"Environment":"Production"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"after":{"arn":"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table","attribute":[{"name":"created_at","type":"N"},{"name":"proposal_id","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"proposal_id","id":"proposals_table","import_table":[],"local_secondary_index":[],"name":"proposals_table","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":true}],"range_key":"created_at","read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[{"enabled":true,"kms_key_arn":""}],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Environment":"Production"},"tags_all":{"Environment":"Production"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"after_unknown":{},"before_sensitive":{"attribute":[{},{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[{}],"tags":{},"tags_all":{},"ttl":[{}]},"after_sensitive":{"attribute":[{},{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[{}],"tags":{},"tags_all":{},"ttl":[{}]}}},{"address":"module.lambda.aws_cloudwatch_log_group.lambda_logs","module_address":"module.lambda","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/lambda/store-proposal","id":"/aws/lambda/store-proposal","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/store-proposal","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{},"tags_all":{}},"after":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/lambda/store-proposal","id":"/aws/lambda/store-proposal","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/store-proposal","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_policy.lambda_dynamodb_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_policy","name":"lambda_dynamodb_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","attachment_count":1,"description":"Permite que a Lambda armazene dados no DynamoDB","id":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","name":"LambdaDynamoDBAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:GetItem\",\"dynamodb:UpdateItem\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMD523FOAV5","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","attachment_count":1,"description":"Permite que a Lambda armazene dados no DynamoDB","id":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","name":"LambdaDynamoDBAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:GetItem\",\"dynamodb:UpdateItem\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMD523FOAV5","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_policy.lambda_rds_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_policy","name":"lambda_rds_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","attachment_count":1,"description":"Permite que a Lambda acesse o RDS PostgreSQL","id":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","name":"LambdaRDSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"rds:DescribeDBInstances\",\"rds:Connect\",\"rds:DescribeDBClusters\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:rds:us-east-1:615026068056:db:contract-db\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMNN2W77VLR","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","attachment_count":1,"description":"Permite que a Lambda acesse o RDS PostgreSQL","id":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","name":"LambdaRDSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"rds:DescribeDBInstances\",\"rds:Connect\",\"rds:DescribeDBClusters\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:rds:us-east-1:615026068056:db:contract-db\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMNN2W77VLR","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_policy.lambda_sns_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_policy","name":"lambda_sns_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","attachment_count":1,"description":"Permite que a Lambda publique mensagens no SNS","id":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","name":"LambdaSNSPublishPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sns:Publish\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMBRNIQ7E6F","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","attachment_count":1,"description":"Permite que a Lambda publique mensagens no SNS","id":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","name":"LambdaSNSPublishPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sns:Publish\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMBRNIQ7E6F","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_policy.lambda_sqs_policy","module_address":"module.lambda","mode":"managed","type":"aws_iam_policy","name":"lambda_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","attachment_count":1,"description":"Permissões para a Lambda ler mensagens do SQS","id":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","name":"LambdaSQSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMCRZEKXD6U","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","attachment_count":1,"description":"Permissões para a Lambda ler mensagens do SQS","id":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","name":"LambdaSQSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMCRZEKXD6U","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_role.lambda_exec","module_address":"module.lambda","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T20:03:17Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","arn:aws:iam::615026068056:policy/service-role/AWSLambdaTracerAccessExecutionRole-ffce4563-6c03-47f2-b84e-8bb6f54da999","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMINKSMLVPD"},"after":{"arn":"arn:aws:iam::615026068056:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T20:03:17Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","arn:aws:iam::615026068056:policy/service-role/AWSLambdaTracerAccessExecutionRole-ffce4563-6c03-47f2-b84e-8bb6f54da999","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMINKSMLVPD"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false,false,false,false,false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false,false,false,false,false,false],"tags":{},"tags_all":{}}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_dynamodb_attach","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_dynamodb_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250117011600035800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250117011600035800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_logging","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_logging","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250117003910430700000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250117003910430700000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_rds_attach","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_rds_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250117043734304800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250117043734304800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_sns_attach","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sns_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250117011736515800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250117011736515800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_sqs_attach","module_address":"module.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"lambda_exec_role-20250116214549361400000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","role":"lambda_exec_role"},"after":{"id":"lambda_exec_role-20250116214549361400000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","role":"lambda_exec_role"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.aws_lambda_event_source_mapping.sqs_trigger","module_address":"module.lambda","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:100776f9-d001-4059-b7ad-0e08275d9b49","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"100776f9-d001-4059-b7ad-0e08275d9b49","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"100776f9-d001-4059-b7ad-0e08275d9b49"},"after":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:100776f9-d001-4059-b7ad-0e08275d9b49","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"100776f9-d001-4059-b7ad-0e08275d9b49","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"100776f9-d001-4059-b7ad-0e08275d9b49"},"after_unknown":{},"before_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]},"after_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]}}},{"address":"module.lambda.aws_lambda_function.process_sqs_postgres","module_address":"module.lambda","mode":"managed","type":"aws_lambda_function","name":"process_sqs_postgres","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","code_sha256":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","DB_NAME":"contracts","DB_PASSWORD":"supersecretpassword","DB_USER":"contract_user","SQS_QUEUE_URL":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/process_sqs_postgres.zip","function_name":"process-sqs-postgres","handler":"process_sqs_postgres.lambda_handler","id":"process-sqs-postgres","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres/invocations","kms_key_arn":"","last_modified":"2025-01-17T05:06:52.000+0000","layers":["arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","arn:aws:lambda:us-east-1:580247275435:layer:LambdaInsightsExtension:53"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/process-sqs-postgres","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","source_code_size":27562324,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"Active"}],"version":"$LATEST","vpc_config":[]},"after":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","code_sha256":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","DB_NAME":"contracts","DB_PASSWORD":"supersecretpassword","DB_USER":"contract_user","SQS_QUEUE_URL":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/process_sqs_postgres.zip","function_name":"process-sqs-postgres","handler":"process_sqs_postgres.lambda_handler","id":"process-sqs-postgres","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres/invocations","kms_key_arn":"","last_modified":"2025-01-17T05:06:52.000+0000","layers":["arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/process-sqs-postgres","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","source_code_size":27562324,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"Active"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{},"before_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{"DB_PASSWORD":true}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false,false],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"after_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{"DB_PASSWORD":true}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}}},{"address":"module.lambda.aws_lambda_function.store_proposal","module_address":"module.lambda","mode":"managed","type":"aws_lambda_function","name":"store_proposal","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal","code_sha256":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"SNS_TOPIC_ARN":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","TABLE_NAME":"proposals_table"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/store_proposal.zip","function_name":"store-proposal","handler":"store_proposal.lambda_handler","id":"store-proposal","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations","kms_key_arn":"","last_modified":"2025-01-17T01:13:31.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/store-proposal","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","source_code_size":1070,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal","code_sha256":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"SNS_TOPIC_ARN":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","TABLE_NAME":"proposals_table"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/store_proposal.zip","function_name":"store-proposal","handler":"store_proposal.lambda_handler","id":"store-proposal","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations","kms_key_arn":"","last_modified":"2025-01-17T01:13:31.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/store-proposal","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","source_code_size":1070,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"after_unknown":{},"before_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"after_sensitive":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]}}},{"address":"module.lambda.aws_lambda_permission.apigw_lambda","module_address":"module.lambda","mode":"managed","type":"aws_lambda_permission","name":"apigw_lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"store-proposal","function_url_auth_type":null,"id":"AllowAPIGatewayInvoke-233ae465","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/*/*","statement_id":"AllowAPIGatewayInvoke-233ae465","statement_id_prefix":""},"after":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"store-proposal","function_url_auth_type":null,"id":"AllowAPIGatewayInvoke-233ae465","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/*/*","statement_id":"AllowAPIGatewayInvoke-233ae465","statement_id_prefix":""},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda.random_id.unique_id","module_address":"module.lambda","mode":"managed","type":"random_id","name":"unique_id","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["no-op"],"before":{"b64_std":"IzrkZQ==","b64_url":"IzrkZQ","byte_length":4,"dec":"591062117","hex":"233ae465","id":"IzrkZQ","keepers":null,"prefix":null},"after":{"b64_std":"IzrkZQ==","b64_url":"IzrkZQ","byte_length":4,"dec":"591062117","hex":"233ae465","id":"IzrkZQ","keepers":null,"prefix":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","module_address":"module.lambda_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:09.687+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"2"},"after":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:09.687+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"2"},"after_unknown":{},"before_sensitive":{"compatible_architectures":[],"compatible_runtimes":[false]},"after_sensitive":{"compatible_architectures":[],"compatible_runtimes":[false]}}},{"address":"module.monitoring.aws_cloudwatch_metric_alarm.dlq_alarm","module_address":"module.monitoring","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"dlq_alarm","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"],"alarm_description":"Alerta para mensagens na DLQ","alarm_name":"DLQMessageCountAlarm","arn":"arn:aws:cloudwatch:us-east-1:615026068056:alarm:DLQMessageCountAlarm","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{},"evaluate_low_sample_count_percentiles":"","evaluation_periods":1,"extended_statistic":"","id":"DLQMessageCountAlarm","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfMessagesVisible","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":300,"statistic":"Sum","tags":{},"tags_all":{},"threshold":10,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"],"alarm_description":"Alerta para mensagens na DLQ","alarm_name":"DLQMessageCountAlarm","arn":"arn:aws:cloudwatch:us-east-1:615026068056:alarm:DLQMessageCountAlarm","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{},"evaluate_low_sample_count_percentiles":"","evaluation_periods":1,"extended_statistic":"","id":"DLQMessageCountAlarm","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfMessagesVisible","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":300,"statistic":"Sum","tags":{},"tags_all":{},"threshold":10,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"after_unknown":{},"before_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"after_sensitive":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.monitoring.aws_iam_policy_attachment.apigateway_cloudwatch","module_address":"module.monitoring","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_cloudwatch","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"groups":[],"id":"APIGatewayCloudWatchPolicyAttachment","name":"APIGatewayCloudWatchPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs","roles":["APIGatewayCloudWatchRole"],"users":[]},"after":{"groups":[],"id":"APIGatewayCloudWatchPolicyAttachment","name":"APIGatewayCloudWatchPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs","roles":["APIGatewayCloudWatchRole"],"users":[]},"after_unknown":{},"before_sensitive":{"groups":[],"roles":[false],"users":[]},"after_sensitive":{"groups":[],"roles":[false],"users":[]}}},{"address":"module.monitoring.aws_iam_role.apigateway_cloudwatch_role","module_address":"module.monitoring","mode":"managed","type":"aws_iam_role","name":"apigateway_cloudwatch_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:role/APIGatewayCloudWatchRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayCloudWatchRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"],"max_session_duration":3600,"name":"APIGatewayCloudWatchRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMGO367BDPW"},"after":{"arn":"arn:aws:iam::615026068056:role/APIGatewayCloudWatchRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayCloudWatchRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"],"max_session_duration":3600,"name":"APIGatewayCloudWatchRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMGO367BDPW"},"after_unknown":{},"before_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}},"after_sensitive":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_db_instance.postgresql","module_address":"module.rds","mode":"managed","type":"aws_db_instance","name":"postgresql","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"address":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"arn":"arn:aws:rds:us-east-1:615026068056:db:contract-db","auto_minor_version_upgrade":true,"availability_zone":"us-east-1a","backup_retention_period":0,"backup_target":"region","backup_window":"06:32-07:02","blue_green_update":[],"ca_cert_identifier":"rds-ca-rsa2048-g1","character_set_name":"","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","customer_owned_ip_enabled":false,"db_name":"","db_subnet_group_name":"rds-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_auth_secret_arn":"","domain_dns_ips":[],"domain_fqdn":"","domain_iam_role_name":"","domain_ou":"","enabled_cloudwatch_logs_exports":[],"endpoint":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com:5432","engine":"postgres","engine_lifecycle_support":"open-source-rds-extended-support","engine_version":"14","engine_version_actual":"14.12","final_snapshot_identifier":null,"hosted_zone_id":"Z2R2ITUGPM61AM","iam_database_authentication_enabled":false,"id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","identifier":"contract-db","identifier_prefix":"","instance_class":"db.t3.micro","iops":0,"kms_key_id":"","latest_restorable_time":"","license_model":"postgresql-license","listener_endpoint":[],"maintenance_window":"sat:03:19-sat:03:49","manage_master_user_password":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"nchar_character_set_name":"","network_type":"IPV4","option_group_name":"default:postgres-14","parameter_group_name":"default.postgres14","password":"supersecretpassword","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":true,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":false,"storage_throughput":0,"storage_type":"gp2","tags":{},"tags_all":{},"timeouts":null,"timezone":"","upgrade_storage_config":null,"username":"contract_user","vpc_security_group_ids":["sg-003715bff4616fce6"]},"after":{"address":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"arn":"arn:aws:rds:us-east-1:615026068056:db:contract-db","auto_minor_version_upgrade":true,"availability_zone":"us-east-1a","backup_retention_period":0,"backup_target":"region","backup_window":"06:32-07:02","blue_green_update":[],"ca_cert_identifier":"rds-ca-rsa2048-g1","character_set_name":"","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","customer_owned_ip_enabled":false,"db_name":"","db_subnet_group_name":"rds-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_auth_secret_arn":"","domain_dns_ips":[],"domain_fqdn":"","domain_iam_role_name":"","domain_ou":"","enabled_cloudwatch_logs_exports":[],"endpoint":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com:5432","engine":"postgres","engine_lifecycle_support":"open-source-rds-extended-support","engine_version":"14","engine_version_actual":"14.12","final_snapshot_identifier":null,"hosted_zone_id":"Z2R2ITUGPM61AM","iam_database_authentication_enabled":false,"id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","identifier":"contract-db","identifier_prefix":"","instance_class":"db.t3.micro","iops":0,"kms_key_id":"","latest_restorable_time":"","license_model":"postgresql-license","listener_endpoint":[],"maintenance_window":"sat:03:19-sat:03:49","manage_master_user_password":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"nchar_character_set_name":"","network_type":"IPV4","option_group_name":"default:postgres-14","parameter_group_name":"default.postgres14","password":"supersecretpassword","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":true,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":false,"storage_throughput":0,"storage_type":"gp2","tags":{},"tags_all":{},"timeouts":null,"timezone":"","upgrade_storage_config":null,"username":"contract_user","vpc_security_group_ids":["sg-003715bff4616fce6"]},"after_unknown":{},"before_sensitive":{"blue_green_update":[],"domain_dns_ips":[],"enabled_cloudwatch_logs_exports":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"after_sensitive":{"blue_green_update":[],"domain_dns_ips":[],"enabled_cloudwatch_logs_exports":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]}}},{"address":"module.rds.aws_db_subnet_group.main","module_address":"module.rds","mode":"managed","type":"aws_db_subnet_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:rds:us-east-1:615026068056:subgrp:rds-subnet-group","description":"Managed by Terraform","id":"rds-subnet-group","name":"rds-subnet-group","name_prefix":"","subnet_ids":["subnet-0957e80fd53730ce3","subnet-0ae25846c7ba0f2d0"],"supported_network_types":["IPV4"],"tags":{},"tags_all":{},"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:rds:us-east-1:615026068056:subgrp:rds-subnet-group","description":"Managed by Terraform","id":"rds-subnet-group","name":"rds-subnet-group","name_prefix":"","subnet_ids":["subnet-0957e80fd53730ce3","subnet-0ae25846c7ba0f2d0"],"supported_network_types":["IPV4"],"tags":{},"tags_all":{},"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}},"after_sensitive":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_security_group.rds_sg","module_address":"module.rds","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-0bdb7f64665ad1375","description":"Permitir acesso ao PostgreSQL","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0bdb7f64665ad1375","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"rds-security-group","name_prefix":"","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0dc09828b95914ee3"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-0bdb7f64665ad1375","description":"Permitir acesso ao PostgreSQL","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0bdb7f64665ad1375","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"rds-security-group","name_prefix":"","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0dc09828b95914ee3"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.sns.aws_sns_topic.proposal_sns_topic","module_address":"module.sns","mode":"managed","type":"aws_sns_topic","name":"proposal_sns_topic","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"proposal_sns_topic","name_prefix":"","owner":"615026068056","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"615026068056\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"after":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"proposal_sns_topic","name_prefix":"","owner":"615026068056","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"615026068056\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.sns.aws_sns_topic_subscription.sqs_subscription","module_address":"module.sns","mode":"managed","type":"aws_sns_topic_subscription","name":"sqs_subscription","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":true,"delivery_policy":"","endpoint":"arn:aws:sqs:us-east-1:615026068056:contract-queue","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","owner_id":"615026068056","pending_confirmation":false,"protocol":"sqs","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"},"after":{"arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":true,"delivery_policy":"","endpoint":"arn:aws:sqs:us-east-1:615026068056:contract-queue","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","owner_id":"615026068056","pending_confirmation":false,"protocol":"sqs","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.sns.aws_sqs_queue_policy.sns_to_sqs_policy","module_address":"module.sns","mode":"managed","type":"aws_sqs_queue_policy","name":"sns_to_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"},"after":{"id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.sqs.aws_iam_policy.sqs_policy","module_address":"module.sqs","mode":"managed","type":"aws_iam_policy","name":"sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::615026068056:policy/sqs-policy","attachment_count":0,"description":"Permissões para acessar filas SQS","id":"arn:aws:iam::615026068056:policy/sqs-policy","name":"sqs-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:SendMessage\",\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:sqs:us-east-1:615026068056:contract-queue\",\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"arn:aws:sqs:us-east-1:615026068056:status-queue\",\"arn:aws:sqs:us-east-1:615026068056:status-dlq\"]}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMDR4WQYZVW","tags":{},"tags_all":{}},"after":{"arn":"arn:aws:iam::615026068056:policy/sqs-policy","attachment_count":0,"description":"Permissões para acessar filas SQS","id":"arn:aws:iam::615026068056:policy/sqs-policy","name":"sqs-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:SendMessage\",\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:sqs:us-east-1:615026068056:contract-queue\",\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"arn:aws:sqs:us-east-1:615026068056:status-queue\",\"arn:aws:sqs:us-east-1:615026068056:status-dlq\"]}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMDR4WQYZVW","tags":{},"tags_all":{}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.sqs.aws_lambda_event_source_mapping.sqs_trigger","module_address":"module.sqs","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c"},"after":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c"},"after_unknown":{},"before_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]},"after_sensitive":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]}}},{"address":"module.sqs.aws_sqs_queue.contract_dlq","module_address":"module.sqs","mode":"managed","type":"aws_sqs_queue","name":"contract_dlq","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"contract-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","visibility_timeout_seconds":30},"after":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"contract-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","visibility_timeout_seconds":30},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.sqs.aws_sqs_queue.contract_queue","module_address":"module.sqs","mode":"managed","type":"aws_sqs_queue","name":"contract_queue","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"contract-queue","name_prefix":"","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","visibility_timeout_seconds":30},"after":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"contract-queue","name_prefix":"","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","visibility_timeout_seconds":30},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.sqs.aws_sqs_queue.status_dlq","module_address":"module.sqs","mode":"managed","type":"aws_sqs_queue","name":"status_dlq","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"status-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","visibility_timeout_seconds":30},"after":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"status-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","visibility_timeout_seconds":30},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.sqs.aws_sqs_queue.status_queue","module_address":"module.sqs","mode":"managed","type":"aws_sqs_queue","name":"status_queue","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"status-queue","name_prefix":"","policy":"","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:status-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","visibility_timeout_seconds":30},"after":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"status-queue","name_prefix":"","policy":"","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:status-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","visibility_timeout_seconds":30},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.gw","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:internet-gateway/igw-012300bde1b5582ba","id":"igw-012300bde1b5582ba","owner_id":"615026068056","tags":{"Name":"Internet Gateway"},"tags_all":{"Name":"Internet Gateway"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:internet-gateway/igw-012300bde1b5582ba","id":"igw-012300bde1b5582ba","owner_id":"615026068056","tags":{"Name":"Internet Gateway"},"tags_all":{"Name":"Internet Gateway"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:route-table/rtb-0bdbf74be69f29231","id":"rtb-0bdbf74be69f29231","owner_id":"615026068056","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-012300bde1b5582ba","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"Public Route Table"},"tags_all":{"Name":"Public Route Table"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:route-table/rtb-0bdbf74be69f29231","id":"rtb-0bdbf74be69f29231","owner_id":"615026068056","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-012300bde1b5582ba","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"Public Route Table"},"tags_all":{"Name":"Public Route Table"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.public_1","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public_1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-0a67afc9e9f4dce6a","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-046050642801757a0","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-0a67afc9e9f4dce6a","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-046050642801757a0","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public_2","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public_2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"gateway_id":"","id":"rtbassoc-010ce294e29cc808b","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-0685068774fd6de78","timeouts":null},"after":{"gateway_id":"","id":"rtbassoc-010ce294e29cc808b","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-0685068774fd6de78","timeouts":null},"after_unknown":{},"before_sensitive":{},"after_sensitive":{}}},{"address":"module.vpc.aws_security_group.rds_sg","module_address":"module.vpc","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["update"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-003715bff4616fce6","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-003715bff4616fce6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-20250116201417992500000001","name_prefix":"terraform-","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{"Name":"RDS Security Group"},"tags_all":{"Name":"RDS Security Group"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-003715bff4616fce6","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-003715bff4616fce6","ingress":[{"cidr_blocks":["192.168.1.1/32"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"terraform-20250116201417992500000001","name_prefix":"terraform-","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{"Name":"RDS Security Group"},"tags_all":{"Name":"RDS Security Group"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private_1","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private_1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0957e80fd53730ce3","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0957e80fd53730ce3","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 1"},"tags_all":{"Name":"Private Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0957e80fd53730ce3","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0957e80fd53730ce3","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 1"},"tags_all":{"Name":"Private Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private_2","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private_2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0ae25846c7ba0f2d0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ae25846c7ba0f2d0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 2"},"tags_all":{"Name":"Private Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0ae25846c7ba0f2d0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ae25846c7ba0f2d0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 2"},"tags_all":{"Name":"Private Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public_1","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public_1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-046050642801757a0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-046050642801757a0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 1"},"tags_all":{"Name":"Public Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-046050642801757a0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-046050642801757a0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 1"},"tags_all":{"Name":"Public Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public_2","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public_2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0685068774fd6de78","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0685068774fd6de78","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 2"},"tags_all":{"Name":"Public Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0685068774fd6de78","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0685068774fd6de78","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 2"},"tags_all":{"Name":"Public Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.main","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:615026068056:vpc/vpc-01d5aeaa024d0582e","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08b56c6c4bd779c79","default_route_table_id":"rtb-095076ccc78541141","default_security_group_id":"sg-05fce1664b336d045","dhcp_options_id":"dopt-00dd9381230e00a27","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-01d5aeaa024d0582e","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-095076ccc78541141","owner_id":"615026068056","tags":{"Name":"main-vpc"},"tags_all":{"Name":"main-vpc"}},"after":{"arn":"arn:aws:ec2:us-east-1:615026068056:vpc/vpc-01d5aeaa024d0582e","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08b56c6c4bd779c79","default_route_table_id":"rtb-095076ccc78541141","default_security_group_id":"sg-05fce1664b336d045","dhcp_options_id":"dopt-00dd9381230e00a27","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-01d5aeaa024d0582e","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-095076ccc78541141","owner_id":"615026068056","tags":{"Name":"main-vpc"},"tags_all":{"Name":"main-vpc"}},"after_unknown":{},"before_sensitive":{"tags":{},"tags_all":{}},"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","module_address":"module.lambda.module.lambda_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:05.433+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"1"},"after":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:05.433+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"1"},"after_unknown":{},"before_sensitive":{"compatible_architectures":[],"compatible_runtimes":[false]},"after_sensitive":{"compatible_architectures":[],"compatible_runtimes":[false]}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.6.0","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.api_gateway.aws_api_gateway_deployment.deployment","mode":"managed","type":"aws_api_gateway_deployment","name":"deployment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"canary_settings":[],"created_date":"2025-01-17T01:13:37Z","description":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/","id":"shht3k","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/","rest_api_id":"cfxtq5juk3","stage_description":null,"stage_name":null,"triggers":null,"variables":null},"sensitive_values":{"canary_settings":[]},"depends_on":["module.api_gateway.aws_api_gateway_integration.post_proposal_lambda","module.api_gateway.aws_api_gateway_method.post_proposal","module.api_gateway.aws_api_gateway_resource.proposals","module.api_gateway.aws_api_gateway_rest_api.proposal_api","module.dynamodb.aws_dynamodb_table.proposals","module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.store_proposal","module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.api_gateway.aws_api_gateway_integration.post_proposal_lambda","mode":"managed","type":"aws_api_gateway_integration","name":"post_proposal_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cache_key_parameters":[],"cache_namespace":"8mpfy6","connection_id":"","connection_type":"INTERNET","content_handling":"","credentials":"","http_method":"POST","id":"agi-cfxtq5juk3-8mpfy6-POST","integration_http_method":"POST","passthrough_behavior":"WHEN_NO_MATCH","request_parameters":{},"request_templates":{},"resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3","timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations/invocations"},"sensitive_values":{"cache_key_parameters":[],"request_parameters":{},"request_templates":{},"tls_config":[]},"depends_on":["module.api_gateway.aws_api_gateway_method.post_proposal","module.api_gateway.aws_api_gateway_resource.proposals","module.api_gateway.aws_api_gateway_rest_api.proposal_api","module.dynamodb.aws_dynamodb_table.proposals","module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.store_proposal","module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.api_gateway.aws_api_gateway_method.post_proposal","mode":"managed","type":"aws_api_gateway_method","name":"post_proposal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_required":false,"authorization":"NONE","authorization_scopes":[],"authorizer_id":"","http_method":"POST","id":"agm-cfxtq5juk3-8mpfy6-POST","operation_name":"","request_models":{},"request_parameters":{},"request_validator_id":"","resource_id":"8mpfy6","rest_api_id":"cfxtq5juk3"},"sensitive_values":{"authorization_scopes":[],"request_models":{},"request_parameters":{}},"depends_on":["module.api_gateway.aws_api_gateway_resource.proposals","module.api_gateway.aws_api_gateway_rest_api.proposal_api"]},{"address":"module.api_gateway.aws_api_gateway_resource.proposals","mode":"managed","type":"aws_api_gateway_resource","name":"proposals","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"8mpfy6","parent_id":"ie8b3kn5za","path":"/proposals","path_part":"proposals","rest_api_id":"cfxtq5juk3"},"sensitive_values":{},"depends_on":["module.api_gateway.aws_api_gateway_rest_api.proposal_api"]},{"address":"module.api_gateway.aws_api_gateway_rest_api.proposal_api","mode":"managed","type":"aws_api_gateway_rest_api","name":"proposal_api","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_source":"HEADER","arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3","binary_media_types":[],"body":null,"created_date":"2025-01-16T20:03:17Z","description":"API Gateway para gerenciar propostas","disable_execute_api_endpoint":false,"endpoint_configuration":[{"types":["REGIONAL"],"vpc_endpoint_ids":[]}],"execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3","fail_on_warnings":null,"id":"cfxtq5juk3","minimum_compression_size":"","name":"proposal-api","parameters":null,"policy":"","put_rest_api_mode":null,"root_resource_id":"ie8b3kn5za","tags":{},"tags_all":{}},"sensitive_values":{"binary_media_types":[],"endpoint_configuration":[{"types":[false],"vpc_endpoint_ids":[]}],"tags":{},"tags_all":{}}},{"address":"module.api_gateway.aws_api_gateway_stage.dev","mode":"managed","type":"aws_api_gateway_stage","name":"dev","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_log_settings":[{"destination_arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","format":"{\"extendedRequestId\":\"$context.extendedRequestId\",\"httpMethod\":\"$context.httpMethod\",\"integrationErrorMessage\":\"$context.integration.error\",\"integrationLatency\":\"$context.integration.latency\",\"integrationStatus\":\"$context.integration.status\",\"ip\":\"$context.identity.sourceIp\",\"requestId\":\"$context.requestId\",\"requestTime\":\"$context.requestTime\",\"resourcePath\":\"$context.resourcePath\",\"responseLength\":\"$context.responseLength\",\"status\":\"$context.status\"}"}],"arn":"arn:aws:apigateway:us-east-1::/restapis/cfxtq5juk3/stages/dev","cache_cluster_enabled":false,"cache_cluster_size":"","canary_settings":[],"client_certificate_id":"","deployment_id":"bivpg9","description":"","documentation_version":"","execution_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/dev","id":"ags-cfxtq5juk3-dev","invoke_url":"https://cfxtq5juk3.execute-api.us-east-1.amazonaws.com/dev","rest_api_id":"cfxtq5juk3","stage_name":"dev","tags":{},"tags_all":{},"variables":{},"web_acl_arn":"","xray_tracing_enabled":false},"sensitive_values":{"access_log_settings":[{}],"canary_settings":[],"tags":{},"tags_all":{},"variables":{}},"depends_on":["module.api_gateway.aws_api_gateway_deployment.deployment","module.api_gateway.aws_api_gateway_integration.post_proposal_lambda","module.api_gateway.aws_api_gateway_method.post_proposal","module.api_gateway.aws_api_gateway_resource.proposals","module.api_gateway.aws_api_gateway_rest_api.proposal_api","module.api_gateway.aws_cloudwatch_log_group.apigateway_logs","module.dynamodb.aws_dynamodb_table.proposals","module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.store_proposal","module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.api_gateway.aws_cloudwatch_log_group.apigateway_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"apigateway_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/apigateway/proposal-api","id":"/aws/apigateway/proposal-api","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/apigateway/proposal-api","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"production","Service":"API Gateway"},"tags_all":{"Environment":"production","Service":"API Gateway"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.api_gateway.aws_iam_policy_attachment.apigateway_xray","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_xray","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":[],"id":"APIGatewayXRayPolicyAttachment","name":"APIGatewayXRayPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess","roles":["APIGatewayXRayRole"],"users":[]},"sensitive_values":{"groups":[],"roles":[false],"users":[]},"depends_on":["module.api_gateway.aws_iam_role.apigateway_xray_role"]},{"address":"module.api_gateway.aws_iam_role.apigateway_xray_role","mode":"managed","type":"aws_iam_role","name":"apigateway_xray_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:role/APIGatewayXRayRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayXRayRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"],"max_session_duration":3600,"name":"APIGatewayXRayRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMFL42DVR5R"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}},{"address":"module.api_gateway.random_id.unique_id","mode":"managed","type":"random_id","name":"unique_id","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"IK3TAw==","b64_url":"IK3TAw","byte_length":4,"dec":"548262659","hex":"20add303","id":"IK3TAw","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.api_gateway"},{"resources":[{"address":"module.dynamodb.aws_dynamodb_table.proposals","mode":"managed","type":"aws_dynamodb_table","name":"proposals","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table","attribute":[{"name":"created_at","type":"N"},{"name":"proposal_id","type":"S"}],"billing_mode":"PAY_PER_REQUEST","deletion_protection_enabled":false,"global_secondary_index":[],"hash_key":"proposal_id","id":"proposals_table","import_table":[],"local_secondary_index":[],"name":"proposals_table","on_demand_throughput":[],"point_in_time_recovery":[{"enabled":true}],"range_key":"created_at","read_capacity":0,"replica":[],"restore_date_time":null,"restore_source_name":null,"restore_source_table_arn":null,"restore_to_latest_time":null,"server_side_encryption":[{"enabled":true,"kms_key_arn":""}],"stream_arn":"","stream_enabled":false,"stream_label":"","stream_view_type":"","table_class":"STANDARD","tags":{"Environment":"Production"},"tags_all":{"Environment":"Production"},"timeouts":null,"ttl":[{"attribute_name":"","enabled":false}],"write_capacity":0},"sensitive_values":{"attribute":[{},{}],"global_secondary_index":[],"import_table":[],"local_secondary_index":[],"on_demand_throughput":[],"point_in_time_recovery":[{}],"replica":[],"server_side_encryption":[{}],"tags":{},"tags_all":{},"ttl":[{}]}}],"address":"module.dynamodb"},{"resources":[{"address":"module.lambda.aws_cloudwatch_log_group.lambda_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:logs:us-east-1:615026068056:log-group:/aws/lambda/store-proposal","id":"/aws/lambda/store-proposal","kms_key_id":"","log_group_class":"STANDARD","name":"/aws/lambda/store-proposal","name_prefix":"","retention_in_days":30,"skip_destroy":false,"tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.dynamodb.aws_dynamodb_table.proposals","module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.store_proposal","module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.lambda.aws_iam_policy.lambda_dynamodb_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_dynamodb_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","attachment_count":1,"description":"Permite que a Lambda armazene dados no DynamoDB","id":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","name":"LambdaDynamoDBAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"dynamodb:PutItem\",\"dynamodb:GetItem\",\"dynamodb:UpdateItem\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:dynamodb:us-east-1:615026068056:table/proposals_table\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMD523FOAV5","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_rds_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_rds_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","attachment_count":1,"description":"Permite que a Lambda acesse o RDS PostgreSQL","id":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","name":"LambdaRDSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"rds:DescribeDBInstances\",\"rds:Connect\",\"rds:DescribeDBClusters\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:rds:us-east-1:615026068056:db:contract-db\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMNN2W77VLR","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_sns_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_sns_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","attachment_count":1,"description":"Permite que a Lambda publique mensagens no SNS","id":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","name":"LambdaSNSPublishPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sns:Publish\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMBRNIQ7E6F","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_policy.lambda_sqs_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","attachment_count":1,"description":"Permissões para a Lambda ler mensagens do SQS","id":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","name":"LambdaSQSAccessPolicy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMCRZEKXD6U","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue"]},{"address":"module.lambda.aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:role/lambda_exec_role","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T20:03:17Z","description":"","force_detach_policies":false,"id":"lambda_exec_role","inline_policy":[],"managed_policy_arns":["arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","arn:aws:iam::615026068056:policy/service-role/AWSLambdaTracerAccessExecutionRole-ffce4563-6c03-47f2-b84e-8bb6f54da999","arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"],"max_session_duration":3600,"name":"lambda_exec_role","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMINKSMLVPD"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false,false,false,false,false,false],"tags":{},"tags_all":{}}},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_dynamodb_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_dynamodb_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117011600035800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaDynamoDBAccessPolicy","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_policy.lambda_dynamodb_policy","module.lambda.aws_iam_role.lambda_exec"]},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_logging","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_logging","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117003910430700000001","policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_role.lambda_exec"]},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_rds_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_rds_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117043734304800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaRDSAccessPolicy","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_policy.lambda_rds_policy","module.lambda.aws_iam_role.lambda_exec"]},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_sns_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sns_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250117011736515800000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSNSPublishPolicy","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_policy.lambda_sns_policy","module.lambda.aws_iam_role.lambda_exec"]},{"address":"module.lambda.aws_iam_role_policy_attachment.lambda_sqs_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"lambda_exec_role-20250116214549361400000001","policy_arn":"arn:aws:iam::615026068056:policy/LambdaSQSAccessPolicy","role":"lambda_exec_role"},"sensitive_values":{},"depends_on":["module.lambda.aws_iam_policy.lambda_sqs_policy","module.lambda.aws_iam_role.lambda_exec","module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue"]},{"address":"module.lambda.aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:100776f9-d001-4059-b7ad-0e08275d9b49","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"100776f9-d001-4059-b7ad-0e08275d9b49","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"100776f9-d001-4059-b7ad-0e08275d9b49"},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]},"depends_on":["module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.process_sqs_postgres","module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","module.rds.aws_db_instance.postgresql","module.rds.aws_db_subnet_group.main","module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue","module.vpc.aws_security_group.rds_sg","module.vpc.aws_subnet.private_1","module.vpc.aws_subnet.private_2","module.vpc.aws_vpc.main"]},{"address":"module.lambda.aws_lambda_function.process_sqs_postgres","mode":"managed","type":"aws_lambda_function","name":"process_sqs_postgres","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","code_sha256":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_HOST":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","DB_NAME":"contracts","DB_PASSWORD":"supersecretpassword","DB_USER":"contract_user","SQS_QUEUE_URL":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/process_sqs_postgres.zip","function_name":"process-sqs-postgres","handler":"process_sqs_postgres.lambda_handler","id":"process-sqs-postgres","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres/invocations","kms_key_arn":"","last_modified":"2025-01-17T05:06:52.000+0000","layers":["arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","arn:aws:lambda:us-east-1:580247275435:layer:LambdaInsightsExtension:53"],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/process-sqs-postgres","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"UjeULGYQoqkoJrow1YP4oVS8PyhrLSFJZYGwxr/tj1U=","source_code_size":27562324,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"Active"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{"DB_PASSWORD":true}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[false,false],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"depends_on":["module.lambda.aws_iam_role.lambda_exec","module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","module.rds.aws_db_instance.postgresql","module.rds.aws_db_subnet_group.main","module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue","module.vpc.aws_security_group.rds_sg","module.vpc.aws_subnet.private_1","module.vpc.aws_subnet.private_2","module.vpc.aws_vpc.main"]},{"address":"module.lambda.aws_lambda_function.store_proposal","mode":"managed","type":"aws_lambda_function","name":"store_proposal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architectures":["x86_64"],"arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal","code_sha256":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","code_signing_config_arn":"","dead_letter_config":[],"description":"","environment":[{"variables":{"SNS_TOPIC_ARN":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","TABLE_NAME":"proposals_table"}}],"ephemeral_storage":[{"size":512}],"file_system_config":[],"filename":"modules/lambda/store_proposal.zip","function_name":"store-proposal","handler":"store_proposal.lambda_handler","id":"store-proposal","image_config":[],"image_uri":"","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal/invocations","kms_key_arn":"","last_modified":"2025-01-17T01:13:31.000+0000","layers":[],"logging_config":[{"application_log_level":"","log_format":"Text","log_group":"/aws/lambda/store-proposal","system_log_level":""}],"memory_size":128,"package_type":"Zip","publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST","qualified_invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:615026068056:function:store-proposal:$LATEST/invocations","replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"role":"arn:aws:iam::615026068056:role/lambda_exec_role","runtime":"python3.9","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"snap_start":[],"source_code_hash":"Cri6cw4fg7zUiczHmj33t2GCqQeLh0K07VLSdUltfFE=","source_code_size":1070,"tags":{},"tags_all":{},"timeout":3,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[]},"sensitive_values":{"architectures":[false],"dead_letter_config":[],"environment":[{"variables":{}}],"ephemeral_storage":[{}],"file_system_config":[],"image_config":[],"layers":[],"logging_config":[{}],"snap_start":[],"tags":{},"tags_all":{},"tracing_config":[{}],"vpc_config":[]},"depends_on":["module.dynamodb.aws_dynamodb_table.proposals","module.lambda.aws_iam_role.lambda_exec","module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.lambda.aws_lambda_permission.apigw_lambda","mode":"managed","type":"aws_lambda_permission","name":"apigw_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"action":"lambda:InvokeFunction","event_source_token":null,"function_name":"store-proposal","function_url_auth_type":null,"id":"AllowAPIGatewayInvoke-233ae465","principal":"apigateway.amazonaws.com","principal_org_id":null,"qualifier":"","source_account":null,"source_arn":"arn:aws:execute-api:us-east-1:615026068056:cfxtq5juk3/*/*","statement_id":"AllowAPIGatewayInvoke-233ae465","statement_id_prefix":""},"sensitive_values":{},"depends_on":["module.api_gateway.aws_api_gateway_rest_api.proposal_api","module.dynamodb.aws_dynamodb_table.proposals","module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.store_proposal","module.lambda.random_id.unique_id","module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.lambda.random_id.unique_id","mode":"managed","type":"random_id","name":"unique_id","provider_name":"registry.terraform.io/hashicorp/random","schema_version":0,"values":{"b64_std":"IzrkZQ==","b64_url":"IzrkZQ","byte_length":4,"dec":"591062117","hex":"233ae465","id":"IzrkZQ","keepers":null,"prefix":null},"sensitive_values":{}}],"address":"module.lambda","child_modules":[{"resources":[{"address":"module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:05.433+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:1","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"1"},"sensitive_values":{"compatible_architectures":[],"compatible_runtimes":[false]}}],"address":"module.lambda.module.lambda_layer"}]},{"resources":[{"address":"module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","code_sha256":"LxGN8EsOcD9zeHbKKaJmDvEvkJ0iHqoG0o/7hcEf+1A=","compatible_architectures":[],"compatible_runtimes":["python3.9"],"created_date":"2025-01-17T02:26:09.687+0000","description":"","filename":"modules/lambda_layer/psycopg2-layer.zip","id":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2:2","layer_arn":"arn:aws:lambda:us-east-1:615026068056:layer:psycopg2","layer_name":"psycopg2","license_info":"","s3_bucket":null,"s3_key":null,"s3_object_version":null,"signing_job_arn":"","signing_profile_version_arn":"","skip_destroy":false,"source_code_hash":"","source_code_size":513329,"version":"2"},"sensitive_values":{"compatible_architectures":[],"compatible_runtimes":[false]}}],"address":"module.lambda_layer"},{"resources":[{"address":"module.monitoring.aws_cloudwatch_metric_alarm.dlq_alarm","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"dlq_alarm","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_actions":["arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"],"alarm_description":"Alerta para mensagens na DLQ","alarm_name":"DLQMessageCountAlarm","arn":"arn:aws:cloudwatch:us-east-1:615026068056:alarm:DLQMessageCountAlarm","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":0,"dimensions":{},"evaluate_low_sample_count_percentiles":"","evaluation_periods":1,"extended_statistic":"","id":"DLQMessageCountAlarm","insufficient_data_actions":[],"metric_name":"ApproximateNumberOfMessagesVisible","metric_query":[],"namespace":"AWS/SQS","ok_actions":[],"period":300,"statistic":"Sum","tags":{},"tags_all":{},"threshold":10,"threshold_metric_id":"","treat_missing_data":"missing","unit":""},"sensitive_values":{"alarm_actions":[false],"dimensions":{},"insufficient_data_actions":[],"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}},"depends_on":["module.sns.aws_sns_topic.proposal_sns_topic"]},{"address":"module.monitoring.aws_iam_policy_attachment.apigateway_cloudwatch","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_cloudwatch","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":[],"id":"APIGatewayCloudWatchPolicyAttachment","name":"APIGatewayCloudWatchPolicyAttachment","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs","roles":["APIGatewayCloudWatchRole"],"users":[]},"sensitive_values":{"groups":[],"roles":[false],"users":[]},"depends_on":["module.monitoring.aws_iam_role.apigateway_cloudwatch_role"]},{"address":"module.monitoring.aws_iam_role.apigateway_cloudwatch_role","mode":"managed","type":"aws_iam_role","name":"apigateway_cloudwatch_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:role/APIGatewayCloudWatchRole","assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","create_date":"2025-01-16T22:30:10Z","description":"","force_detach_policies":false,"id":"APIGatewayCloudWatchRole","inline_policy":[],"managed_policy_arns":["arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"],"max_session_duration":3600,"name":"APIGatewayCloudWatchRole","name_prefix":"","path":"/","permissions_boundary":"","tags":{},"tags_all":{},"unique_id":"AROAY6MTJBJMGO367BDPW"},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[false],"tags":{},"tags_all":{}}}],"address":"module.monitoring"},{"resources":[{"address":"module.rds.aws_db_instance.postgresql","mode":"managed","type":"aws_db_instance","name":"postgresql","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"address":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com","allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"arn":"arn:aws:rds:us-east-1:615026068056:db:contract-db","auto_minor_version_upgrade":true,"availability_zone":"us-east-1a","backup_retention_period":0,"backup_target":"region","backup_window":"06:32-07:02","blue_green_update":[],"ca_cert_identifier":"rds-ca-rsa2048-g1","character_set_name":"","copy_tags_to_snapshot":false,"custom_iam_instance_profile":"","customer_owned_ip_enabled":false,"db_name":"","db_subnet_group_name":"rds-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":false,"domain":"","domain_auth_secret_arn":"","domain_dns_ips":[],"domain_fqdn":"","domain_iam_role_name":"","domain_ou":"","enabled_cloudwatch_logs_exports":[],"endpoint":"contract-db.cdvbdsggoecu.us-east-1.rds.amazonaws.com:5432","engine":"postgres","engine_lifecycle_support":"open-source-rds-extended-support","engine_version":"14","engine_version_actual":"14.12","final_snapshot_identifier":null,"hosted_zone_id":"Z2R2ITUGPM61AM","iam_database_authentication_enabled":false,"id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","identifier":"contract-db","identifier_prefix":"","instance_class":"db.t3.micro","iops":0,"kms_key_id":"","latest_restorable_time":"","license_model":"postgresql-license","listener_endpoint":[],"maintenance_window":"sat:03:19-sat:03:49","manage_master_user_password":null,"master_user_secret":[],"master_user_secret_kms_key_id":null,"max_allocated_storage":0,"monitoring_interval":0,"monitoring_role_arn":"","multi_az":false,"nchar_character_set_name":"","network_type":"IPV4","option_group_name":"default:postgres-14","parameter_group_name":"default.postgres14","password":"supersecretpassword","performance_insights_enabled":false,"performance_insights_kms_key_id":"","performance_insights_retention_period":0,"port":5432,"publicly_accessible":true,"replica_mode":"","replicas":[],"replicate_source_db":"","resource_id":"db-DR6H7AXDLPXUVQBUQAO4UAAGOM","restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"snapshot_identifier":null,"status":"available","storage_encrypted":false,"storage_throughput":0,"storage_type":"gp2","tags":{},"tags_all":{},"timeouts":null,"timezone":"","upgrade_storage_config":null,"username":"contract_user","vpc_security_group_ids":["sg-003715bff4616fce6"]},"sensitive_values":{"blue_green_update":[],"domain_dns_ips":[],"enabled_cloudwatch_logs_exports":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[false]},"depends_on":["module.rds.aws_db_subnet_group.main","module.vpc.aws_security_group.rds_sg","module.vpc.aws_subnet.private_1","module.vpc.aws_subnet.private_2","module.vpc.aws_vpc.main"]},{"address":"module.rds.aws_db_subnet_group.main","mode":"managed","type":"aws_db_subnet_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:rds:us-east-1:615026068056:subgrp:rds-subnet-group","description":"Managed by Terraform","id":"rds-subnet-group","name":"rds-subnet-group","name_prefix":"","subnet_ids":["subnet-0957e80fd53730ce3","subnet-0ae25846c7ba0f2d0"],"supported_network_types":["IPV4"],"tags":{},"tags_all":{},"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"subnet_ids":[false,false],"supported_network_types":[false],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_subnet.private_1","module.vpc.aws_subnet.private_2","module.vpc.aws_vpc.main"]},{"address":"module.rds.aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-0bdb7f64665ad1375","description":"Permitir acesso ao PostgreSQL","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0bdb7f64665ad1375","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":5432}],"name":"rds-security-group","name_prefix":"","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{},"tags_all":{},"timeouts":null,"vpc_id":"vpc-0dc09828b95914ee3"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.rds"},{"resources":[{"address":"module.sns.aws_sns_topic.proposal_sns_topic","mode":"managed","type":"aws_sns_topic","name":"proposal_sns_topic","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":"","application_success_feedback_role_arn":"","application_success_feedback_sample_rate":0,"archive_policy":"","arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","beginning_archive_time":"","content_based_deduplication":false,"delivery_policy":"","display_name":"","fifo_topic":false,"firehose_failure_feedback_role_arn":"","firehose_success_feedback_role_arn":"","firehose_success_feedback_sample_rate":0,"http_failure_feedback_role_arn":"","http_success_feedback_role_arn":"","http_success_feedback_sample_rate":0,"id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic","kms_master_key_id":"","lambda_failure_feedback_role_arn":"","lambda_success_feedback_role_arn":"","lambda_success_feedback_sample_rate":0,"name":"proposal_sns_topic","name_prefix":"","owner":"615026068056","policy":"{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"615026068056\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}","signature_version":0,"sqs_failure_feedback_role_arn":"","sqs_success_feedback_role_arn":"","sqs_success_feedback_sample_rate":0,"tags":{},"tags_all":{},"tracing_config":""},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sns.aws_sns_topic_subscription.sqs_subscription","mode":"managed","type":"aws_sns_topic_subscription","name":"sqs_subscription","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","confirmation_timeout_in_minutes":1,"confirmation_was_authenticated":true,"delivery_policy":"","endpoint":"arn:aws:sqs:us-east-1:615026068056:contract-queue","endpoint_auto_confirms":false,"filter_policy":"","filter_policy_scope":"","id":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic:68fc92fc-a347-4b43-8ae9-c407515cb5b6","owner_id":"615026068056","pending_confirmation":false,"protocol":"sqs","raw_message_delivery":false,"redrive_policy":"","replay_policy":"","subscription_role_arn":"","topic_arn":"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic"},"sensitive_values":{},"depends_on":["module.sns.aws_sns_topic.proposal_sns_topic","module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue"]},{"address":"module.sns.aws_sqs_queue_policy.sns_to_sqs_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"sns_to_sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","queue_url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue"},"sensitive_values":{},"depends_on":["module.sns.aws_sns_topic.proposal_sns_topic","module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue"]}],"address":"module.sns"},{"resources":[{"address":"module.sqs.aws_iam_policy.sqs_policy","mode":"managed","type":"aws_iam_policy","name":"sqs_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:iam::615026068056:policy/sqs-policy","attachment_count":0,"description":"Permissões para acessar filas SQS","id":"arn:aws:iam::615026068056:policy/sqs-policy","name":"sqs-policy","name_prefix":"","path":"/","policy":"{\"Statement\":[{\"Action\":[\"sqs:SendMessage\",\"sqs:ReceiveMessage\",\"sqs:DeleteMessage\",\"sqs:GetQueueAttributes\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:sqs:us-east-1:615026068056:contract-queue\",\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"arn:aws:sqs:us-east-1:615026068056:status-queue\",\"arn:aws:sqs:us-east-1:615026068056:status-dlq\"]}],\"Version\":\"2012-10-17\"}","policy_id":"ANPAY6MTJBJMDR4WQYZVW","tags":{},"tags_all":{}},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue","module.sqs.aws_sqs_queue.status_dlq","module.sqs.aws_sqs_queue.status_queue"]},{"address":"module.sqs.aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_managed_kafka_event_source_config":[],"arn":"arn:aws:lambda:us-east-1:615026068056:event-source-mapping:0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","batch_size":10,"bisect_batch_on_function_error":false,"destination_config":[],"document_db_event_source_config":[],"enabled":true,"event_source_arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","filter_criteria":[],"function_arn":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_name":"arn:aws:lambda:us-east-1:615026068056:function:process-sqs-postgres","function_response_types":[],"id":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c","kms_key_arn":"","last_modified":"2025-01-16T21:56:16Z","last_processing_result":"","maximum_batching_window_in_seconds":0,"maximum_record_age_in_seconds":0,"maximum_retry_attempts":0,"metrics_config":[],"parallelization_factor":0,"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"starting_position":"","starting_position_timestamp":"","state":"Enabled","state_transition_reason":"USER_INITIATED","tags":{},"tags_all":{},"topics":[],"tumbling_window_in_seconds":0,"uuid":"0afa0c3c-9d61-494e-a1ff-197cf43f0c1c"},"sensitive_values":{"amazon_managed_kafka_event_source_config":[],"destination_config":[],"document_db_event_source_config":[],"filter_criteria":[],"function_response_types":[],"metrics_config":[],"provisioned_poller_config":[],"queues":[],"scaling_config":[],"self_managed_event_source":[],"self_managed_kafka_event_source_config":[],"source_access_configuration":[],"tags":{},"tags_all":{},"topics":[]},"depends_on":["module.lambda.aws_iam_role.lambda_exec","module.lambda.aws_lambda_function.process_sqs_postgres","module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","module.rds.aws_db_instance.postgresql","module.rds.aws_db_subnet_group.main","module.sqs.aws_sqs_queue.contract_dlq","module.sqs.aws_sqs_queue.contract_queue","module.vpc.aws_security_group.rds_sg","module.vpc.aws_subnet.private_1","module.vpc.aws_subnet.private_2","module.vpc.aws_vpc.main"]},{"address":"module.sqs.aws_sqs_queue.contract_dlq","mode":"managed","type":"aws_sqs_queue","name":"contract_dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"contract-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-dlq","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sqs.aws_sqs_queue.contract_queue","mode":"managed","type":"aws_sqs_queue","name":"contract_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:contract-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"contract-queue","name_prefix":"","policy":"{\"Statement\":[{\"Action\":\"SQS:SendMessage\",\"Condition\":{\"ArnEquals\":{\"aws:SourceArn\":\"arn:aws:sns:us-east-1:615026068056:proposal_sns_topic\"}},\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:sqs:us-east-1:615026068056:contract-queue\"}],\"Version\":\"2012-10-17\"}","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:contract-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/contract-queue","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.sqs.aws_sqs_queue.contract_dlq"]},{"address":"module.sqs.aws_sqs_queue.status_dlq","mode":"managed","type":"aws_sqs_queue","name":"status_dlq","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-dlq","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":1209600,"name":"status-dlq","name_prefix":"","policy":"","receive_wait_time_seconds":0,"redrive_allow_policy":"","redrive_policy":"","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-dlq","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.sqs.aws_sqs_queue.status_queue","mode":"managed","type":"aws_sqs_queue","name":"status_queue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:sqs:us-east-1:615026068056:status-queue","content_based_deduplication":false,"deduplication_scope":"","delay_seconds":0,"fifo_queue":false,"fifo_throughput_limit":"","id":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","kms_data_key_reuse_period_seconds":300,"kms_master_key_id":"","max_message_size":262144,"message_retention_seconds":86400,"name":"status-queue","name_prefix":"","policy":"","receive_wait_time_seconds":5,"redrive_allow_policy":"","redrive_policy":"{\"deadLetterTargetArn\":\"arn:aws:sqs:us-east-1:615026068056:status-dlq\",\"maxReceiveCount\":5}","sqs_managed_sse_enabled":true,"tags":{},"tags_all":{},"url":"https://sqs.us-east-1.amazonaws.com/615026068056/status-queue","visibility_timeout_seconds":30},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.sqs.aws_sqs_queue.status_dlq"]}],"address":"module.sqs"},{"resources":[{"address":"module.vpc.aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:internet-gateway/igw-012300bde1b5582ba","id":"igw-012300bde1b5582ba","owner_id":"615026068056","tags":{"Name":"Internet Gateway"},"tags_all":{"Name":"Internet Gateway"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:route-table/rtb-0bdbf74be69f29231","id":"rtb-0bdbf74be69f29231","owner_id":"615026068056","propagating_vgws":[],"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"igw-012300bde1b5582ba","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"Public Route Table"},"tags_all":{"Name":"Public Route Table"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_internet_gateway.gw","module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_route_table_association.public_1","mode":"managed","type":"aws_route_table_association","name":"public_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-0a67afc9e9f4dce6a","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-046050642801757a0","timeouts":null},"sensitive_values":{},"depends_on":["module.vpc.aws_internet_gateway.gw","module.vpc.aws_route_table.public","module.vpc.aws_subnet.public_1","module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_route_table_association.public_2","mode":"managed","type":"aws_route_table_association","name":"public_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":"","id":"rtbassoc-010ce294e29cc808b","route_table_id":"rtb-0bdbf74be69f29231","subnet_id":"subnet-0685068774fd6de78","timeouts":null},"sensitive_values":{},"depends_on":["module.vpc.aws_internet_gateway.gw","module.vpc.aws_route_table.public","module.vpc.aws_subnet.public_2","module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:security-group/sg-003715bff4616fce6","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-003715bff4616fce6","ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"terraform-20250116201417992500000001","name_prefix":"terraform-","owner_id":"615026068056","revoke_rules_on_delete":false,"tags":{"Name":"RDS Security Group"},"tags_all":{"Name":"RDS Security Group"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_subnet.private_1","mode":"managed","type":"aws_subnet","name":"private_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0957e80fd53730ce3","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0957e80fd53730ce3","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 1"},"tags_all":{"Name":"Private Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_subnet.private_2","mode":"managed","type":"aws_subnet","name":"private_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0ae25846c7ba0f2d0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0ae25846c7ba0f2d0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":false,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Private Subnet 2"},"tags_all":{"Name":"Private Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_subnet.public_1","mode":"managed","type":"aws_subnet","name":"public_1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-046050642801757a0","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1a","availability_zone_id":"use1-az2","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-046050642801757a0","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 1"},"tags_all":{"Name":"Public Subnet 1"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_subnet.public_2","mode":"managed","type":"aws_subnet","name":"public_2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:subnet/subnet-0685068774fd6de78","assign_ipv6_address_on_creation":false,"availability_zone":"us-east-1b","availability_zone_id":"use1-az4","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":"","enable_dns64":false,"enable_lni_at_device_index":0,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"id":"subnet-0685068774fd6de78","ipv6_cidr_block":"","ipv6_cidr_block_association_id":"","ipv6_native":false,"map_customer_owned_ip_on_launch":false,"map_public_ip_on_launch":true,"outpost_arn":"","owner_id":"615026068056","private_dns_hostname_type_on_launch":"ip-name","tags":{"Name":"Public Subnet 2"},"tags_all":{"Name":"Public Subnet 2"},"timeouts":null,"vpc_id":"vpc-01d5aeaa024d0582e"},"sensitive_values":{"tags":{},"tags_all":{}},"depends_on":["module.vpc.aws_vpc.main"]},{"address":"module.vpc.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:615026068056:vpc/vpc-01d5aeaa024d0582e","assign_generated_ipv6_cidr_block":false,"cidr_block":"10.0.0.0/16","default_network_acl_id":"acl-08b56c6c4bd779c79","default_route_table_id":"rtb-095076ccc78541141","default_security_group_id":"sg-05fce1664b336d045","dhcp_options_id":"dopt-00dd9381230e00a27","enable_dns_hostnames":true,"enable_dns_support":true,"enable_network_address_usage_metrics":false,"id":"vpc-01d5aeaa024d0582e","instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_association_id":"","ipv6_cidr_block":"","ipv6_cidr_block_network_border_group":"","ipv6_ipam_pool_id":"","ipv6_netmask_length":0,"main_route_table_id":"rtb-095076ccc78541141","owner_id":"615026068056","tags":{"Name":"main-vpc"},"tags_all":{"Name":"main-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","expressions":{"region":{"constant_value":"us-east-1"}}},"module.api_gateway:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.api_gateway"},"module.lambda:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.lambda"}},"root_module":{"module_calls":{"api_gateway":{"source":"./modules/api_gateway","expressions":{"function_name":{"constant_value":"store-proposal"},"lambda_proposal_arn":{"references":["module.lambda.store_proposal_arn","module.lambda"]}},"module":{"outputs":{"api_gateway_invoke_url":{"expression":{"references":["aws_api_gateway_deployment.deployment.invoke_url","aws_api_gateway_deployment.deployment"]}},"execution_arn":{"expression":{"references":["aws_api_gateway_rest_api.proposal_api.execution_arn","aws_api_gateway_rest_api.proposal_api"]},"description":"ARN de execução do API Gateway"}},"resources":[{"address":"aws_api_gateway_deployment.deployment","mode":"managed","type":"aws_api_gateway_deployment","name":"deployment","provider_config_key":"aws","expressions":{"rest_api_id":{"references":["aws_api_gateway_rest_api.proposal_api.id","aws_api_gateway_rest_api.proposal_api"]}},"schema_version":0,"depends_on":["aws_api_gateway_integration.post_proposal_lambda"]},{"address":"aws_api_gateway_integration.post_proposal_lambda","mode":"managed","type":"aws_api_gateway_integration","name":"post_proposal_lambda","provider_config_key":"aws","expressions":{"http_method":{"references":["aws_api_gateway_method.post_proposal.http_method","aws_api_gateway_method.post_proposal"]},"integration_http_method":{"constant_value":"POST"},"resource_id":{"references":["aws_api_gateway_resource.proposals.id","aws_api_gateway_resource.proposals"]},"rest_api_id":{"references":["aws_api_gateway_rest_api.proposal_api.id","aws_api_gateway_rest_api.proposal_api"]},"type":{"constant_value":"AWS_PROXY"},"uri":{"references":["var.lambda_proposal_arn"]}},"schema_version":0},{"address":"aws_api_gateway_method.post_proposal","mode":"managed","type":"aws_api_gateway_method","name":"post_proposal","provider_config_key":"aws","expressions":{"authorization":{"constant_value":"NONE"},"http_method":{"constant_value":"POST"},"resource_id":{"references":["aws_api_gateway_resource.proposals.id","aws_api_gateway_resource.proposals"]},"rest_api_id":{"references":["aws_api_gateway_rest_api.proposal_api.id","aws_api_gateway_rest_api.proposal_api"]}},"schema_version":0},{"address":"aws_api_gateway_resource.proposals","mode":"managed","type":"aws_api_gateway_resource","name":"proposals","provider_config_key":"aws","expressions":{"parent_id":{"references":["aws_api_gateway_rest_api.proposal_api.root_resource_id","aws_api_gateway_rest_api.proposal_api"]},"path_part":{"constant_value":"proposals"},"rest_api_id":{"references":["aws_api_gateway_rest_api.proposal_api.id","aws_api_gateway_rest_api.proposal_api"]}},"schema_version":0},{"address":"aws_api_gateway_rest_api.proposal_api","mode":"managed","type":"aws_api_gateway_rest_api","name":"proposal_api","provider_config_key":"aws","expressions":{"description":{"constant_value":"API Gateway para gerenciar propostas"},"endpoint_configuration":[{"types":{"constant_value":["REGIONAL"]}}],"name":{"constant_value":"proposal-api"}},"schema_version":0},{"address":"aws_api_gateway_stage.dev","mode":"managed","type":"aws_api_gateway_stage","name":"dev","provider_config_key":"aws","expressions":{"access_log_settings":[{"destination_arn":{"references":["aws_cloudwatch_log_group.apigateway_logs.arn","aws_cloudwatch_log_group.apigateway_logs"]},"format":{}}],"deployment_id":{"references":["aws_api_gateway_deployment.deployment.id","aws_api_gateway_deployment.deployment"]},"rest_api_id":{"references":["aws_api_gateway_rest_api.proposal_api.id","aws_api_gateway_rest_api.proposal_api"]},"stage_name":{"constant_value":"dev"}},"schema_version":0},{"address":"aws_cloudwatch_log_group.apigateway_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"apigateway_logs","provider_config_key":"aws","expressions":{"name":{"constant_value":"/aws/apigateway/proposal-api"},"retention_in_days":{"constant_value":30},"tags":{"constant_value":{"Environment":"production","Service":"API Gateway"}}},"schema_version":0},{"address":"aws_iam_policy_attachment.apigateway_xray","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_xray","provider_config_key":"aws","expressions":{"name":{"constant_value":"APIGatewayXRayPolicyAttachment"},"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AWSXrayWriteOnlyAccess"},"roles":{"references":["aws_iam_role.apigateway_xray_role.name","aws_iam_role.apigateway_xray_role"]}},"schema_version":0},{"address":"aws_iam_role.apigateway_xray_role","mode":"managed","type":"aws_iam_role","name":"apigateway_xray_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"APIGatewayXRayRole"}},"schema_version":0},{"address":"random_id.unique_id","mode":"managed","type":"random_id","name":"unique_id","provider_config_key":"module.api_gateway:random","expressions":{"byte_length":{"constant_value":4}},"schema_version":0}],"variables":{"function_name":{"description":"Name da função Lambda que será chamada pelo API Gateway"},"lambda_proposal_arn":{"description":"ARN da função Lambda que será chamada pelo API Gateway"}}}},"dynamodb":{"source":"./modules/dynamodb","module":{"outputs":{"table_name":{"expression":{"references":["aws_dynamodb_table.proposals.name","aws_dynamodb_table.proposals"]}}},"resources":[{"address":"aws_dynamodb_table.proposals","mode":"managed","type":"aws_dynamodb_table","name":"proposals","provider_config_key":"aws","expressions":{"attribute":[{"name":{"constant_value":"proposal_id"},"type":{"constant_value":"S"}},{"name":{"constant_value":"created_at"},"type":{"constant_value":"N"}}],"billing_mode":{"constant_value":"PAY_PER_REQUEST"},"hash_key":{"constant_value":"proposal_id"},"name":{"constant_value":"proposals_table"},"point_in_time_recovery":[{"enabled":{"constant_value":true}}],"range_key":{"constant_value":"created_at"},"server_side_encryption":[{"enabled":{"constant_value":true}}],"tags":{"constant_value":{"Environment":"Production"}},"ttl":[{"attribute_name":{"constant_value":"expiration_time"},"enabled":{"constant_value":false}}]},"schema_version":1}]}},"lambda":{"source":"./modules/lambda","expressions":{"api_gateway_execution_arn":{"references":["module.api_gateway.execution_arn","module.api_gateway"]},"db_host":{"references":["module.rds.db_host","module.rds"]},"db_name":{"constant_value":"contracts"},"db_password":{"constant_value":"supersecretpassword"},"db_user":{"constant_value":"contract_user"},"dynamodb_table_name":{"references":["module.dynamodb.table_name","module.dynamodb"]},"sns_proposal_arn":{"references":["module.sns.sns_proposal_arn","module.sns"]},"sqs_contract_queue_arn":{"references":["module.sqs.contract_queue_arn","module.sqs"]},"sqs_contract_queue_url":{"references":["module.sqs.contract_queue_url","module.sqs"]}},"module":{"outputs":{"lambda_exec_role_arn":{"expression":{"references":["aws_iam_role.lambda_exec.arn","aws_iam_role.lambda_exec"]}},"process_sqs_postgres_arn":{"expression":{"references":["aws_lambda_function.process_sqs_postgres.arn","aws_lambda_function.process_sqs_postgres"]}},"store_proposal_arn":{"expression":{"references":["aws_lambda_function.store_proposal.invoke_arn","aws_lambda_function.store_proposal"]}}},"resources":[{"address":"aws_cloudwatch_log_group.lambda_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"lambda_logs","provider_config_key":"aws","expressions":{"name":{"references":["aws_lambda_function.store_proposal.function_name","aws_lambda_function.store_proposal"]},"retention_in_days":{"constant_value":30}},"schema_version":0},{"address":"aws_iam_policy.lambda_dynamodb_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_dynamodb_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Permite que a Lambda armazene dados no DynamoDB"},"name":{"constant_value":"LambdaDynamoDBAccessPolicy"},"policy":{}},"schema_version":0},{"address":"aws_iam_policy.lambda_rds_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_rds_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Permite que a Lambda acesse o RDS PostgreSQL"},"name":{"constant_value":"LambdaRDSAccessPolicy"},"policy":{}},"schema_version":0},{"address":"aws_iam_policy.lambda_sns_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_sns_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Permite que a Lambda publique mensagens no SNS"},"name":{"constant_value":"LambdaSNSPublishPolicy"},"policy":{}},"schema_version":0},{"address":"aws_iam_policy.lambda_sqs_policy","mode":"managed","type":"aws_iam_policy","name":"lambda_sqs_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Permissões para a Lambda ler mensagens do SQS"},"name":{"constant_value":"LambdaSQSAccessPolicy"},"policy":{"references":["var.sqs_contract_queue_arn"]}},"schema_version":0},{"address":"aws_iam_role.lambda_exec","mode":"managed","type":"aws_iam_role","name":"lambda_exec","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"lambda_exec_role"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_dynamodb_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_dynamodb_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_dynamodb_policy.arn","aws_iam_policy.lambda_dynamodb_policy"]},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_logging","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_logging","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_rds_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_rds_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_rds_policy.arn","aws_iam_policy.lambda_rds_policy"]},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_sns_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sns_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_sns_policy.arn","aws_iam_policy.lambda_sns_policy"]},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda_sqs_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda_sqs_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.lambda_sqs_policy.arn","aws_iam_policy.lambda_sqs_policy"]},"role":{"references":["aws_iam_role.lambda_exec.name","aws_iam_role.lambda_exec"]}},"schema_version":0},{"address":"aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_config_key":"aws","expressions":{"batch_size":{"constant_value":10},"event_source_arn":{"references":["var.sqs_contract_queue_arn"]},"function_name":{"references":["aws_lambda_function.process_sqs_postgres.arn","aws_lambda_function.process_sqs_postgres"]}},"schema_version":0,"depends_on":["aws_lambda_function.process_sqs_postgres"]},{"address":"aws_lambda_function.process_sqs_postgres","mode":"managed","type":"aws_lambda_function","name":"process_sqs_postgres","provider_config_key":"aws","expressions":{"environment":[{"variables":{"references":["var.db_host","var.db_name","var.db_user","var.db_password","var.sqs_contract_queue_url"]}}],"filename":{"references":["path.module"]},"function_name":{"constant_value":"process-sqs-postgres"},"handler":{"constant_value":"process_sqs_postgres.lambda_handler"},"layers":{"references":["module.lambda_layer.psycopg2_layer_arn","module.lambda_layer"]},"role":{"references":["aws_iam_role.lambda_exec.arn","aws_iam_role.lambda_exec"]},"runtime":{"constant_value":"python3.9"},"source_code_hash":{"references":["path.module"]}},"schema_version":0},{"address":"aws_lambda_function.store_proposal","mode":"managed","type":"aws_lambda_function","name":"store_proposal","provider_config_key":"aws","expressions":{"environment":[{"variables":{"references":["var.dynamodb_table_name","var.sns_proposal_arn"]}}],"filename":{"references":["path.module"]},"function_name":{"constant_value":"store-proposal"},"handler":{"constant_value":"store_proposal.lambda_handler"},"role":{"references":["aws_iam_role.lambda_exec.arn","aws_iam_role.lambda_exec"]},"runtime":{"constant_value":"python3.9"},"source_code_hash":{"references":["path.module"]}},"schema_version":0},{"address":"aws_lambda_permission.apigw_lambda","mode":"managed","type":"aws_lambda_permission","name":"apigw_lambda","provider_config_key":"aws","expressions":{"action":{"constant_value":"lambda:InvokeFunction"},"function_name":{"references":["aws_lambda_function.store_proposal.function_name","aws_lambda_function.store_proposal"]},"principal":{"constant_value":"apigateway.amazonaws.com"},"source_arn":{"references":["var.api_gateway_execution_arn"]},"statement_id":{"references":["random_id.unique_id.hex","random_id.unique_id"]}},"schema_version":0},{"address":"random_id.unique_id","mode":"managed","type":"random_id","name":"unique_id","provider_config_key":"module.lambda:random","expressions":{"byte_length":{"constant_value":4}},"schema_version":0}],"module_calls":{"lambda_layer":{"source":"../lambda_layer","module":{"outputs":{"psycopg2_layer_arn":{"expression":{"references":["aws_lambda_layer_version.psycopg2_layer.arn","aws_lambda_layer_version.psycopg2_layer"]}}},"resources":[{"address":"aws_lambda_layer_version.psycopg2_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_config_key":"aws","expressions":{"compatible_runtimes":{"constant_value":["python3.9"]},"filename":{"references":["path.module"]},"layer_name":{"constant_value":"psycopg2"}},"schema_version":0}]}}},"variables":{"api_gateway_execution_arn":{"description":"ARN de execução do API Gateway"},"db_host":{"description":"Host do banco PostgreSQL"},"db_name":{"description":"Nome do banco PostgreSQL"},"db_password":{"description":"Senha do banco PostgreSQL","sensitive":true},"db_user":{"description":"Usuário do banco PostgreSQL"},"dynamodb_table_name":{"description":"Nome da tabela DynamoDB para armazenar propostas"},"sns_proposal_arn":{"description":"ARN do SNS para publicar propostas"},"sqs_contract_queue_arn":{"description":"ARN da fila SQS de contratação"},"sqs_contract_queue_url":{"description":"URL da fila SQS de contratação"}}}},"lambda_layer":{"source":"./modules/lambda_layer","module":{"outputs":{"psycopg2_layer_arn":{"expression":{"references":["aws_lambda_layer_version.psycopg2_layer.arn","aws_lambda_layer_version.psycopg2_layer"]}}},"resources":[{"address":"aws_lambda_layer_version.psycopg2_layer","mode":"managed","type":"aws_lambda_layer_version","name":"psycopg2_layer","provider_config_key":"aws","expressions":{"compatible_runtimes":{"constant_value":["python3.9"]},"filename":{"references":["path.module"]},"layer_name":{"constant_value":"psycopg2"}},"schema_version":0}]}},"monitoring":{"source":"./modules/monitoring","expressions":{"contract_dlq_name":{"references":["module.sqs.contract_dlq_name","module.sqs"]},"sns_proposal_arn":{"references":["module.sns.sns_proposal_arn","module.sns"]}},"module":{"resources":[{"address":"aws_cloudwatch_metric_alarm.dlq_alarm","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"dlq_alarm","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["var.sns_proposal_arn"]},"alarm_description":{"constant_value":"Alerta para mensagens na DLQ"},"alarm_name":{"constant_value":"DLQMessageCountAlarm"},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"evaluation_periods":{"constant_value":1},"metric_name":{"constant_value":"ApproximateNumberOfMessagesVisible"},"namespace":{"constant_value":"AWS/SQS"},"period":{"constant_value":300},"statistic":{"constant_value":"Sum"},"threshold":{"constant_value":10}},"schema_version":1},{"address":"aws_iam_policy_attachment.apigateway_cloudwatch","mode":"managed","type":"aws_iam_policy_attachment","name":"apigateway_cloudwatch","provider_config_key":"aws","expressions":{"name":{"constant_value":"APIGatewayCloudWatchPolicyAttachment"},"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"},"roles":{"references":["aws_iam_role.apigateway_cloudwatch_role.name","aws_iam_role.apigateway_cloudwatch_role"]}},"schema_version":0},{"address":"aws_iam_role.apigateway_cloudwatch_role","mode":"managed","type":"aws_iam_role","name":"apigateway_cloudwatch_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"APIGatewayCloudWatchRole"}},"schema_version":0}],"variables":{"contract_dlq_name":{"description":"Nome da fila DLQ de contratos"},"sns_proposal_arn":{"description":"ARN do SNS para alertas do CloudWatch"}}}},"rds":{"source":"./modules/rds","expressions":{"db_host":{"references":["module.rds.rds_endpoint","module.rds"]},"db_password":{"constant_value":"supersecretpassword"},"db_username":{"constant_value":"contract_user"},"security_group_ids":{"references":["module.vpc.rds_security_group_id","module.vpc"]},"subnet_ids":{"references":["module.vpc.private_subnet_ids","module.vpc"]}},"module":{"outputs":{"db_host":{"expression":{"references":["aws_db_instance.postgresql.address","aws_db_instance.postgresql"]}},"rds_endpoint":{"expression":{"references":["aws_db_instance.postgresql.address","aws_db_instance.postgresql"]}}},"resources":[{"address":"aws_db_instance.postgresql","mode":"managed","type":"aws_db_instance","name":"postgresql","provider_config_key":"aws","expressions":{"allocated_storage":{"constant_value":20},"db_subnet_group_name":{"references":["aws_db_subnet_group.main.name","aws_db_subnet_group.main"]},"engine":{"constant_value":"postgres"},"engine_version":{"constant_value":"14"},"identifier":{"constant_value":"contract-db"},"instance_class":{"constant_value":"db.t3.micro"},"password":{"references":["var.db_password"]},"publicly_accessible":{"constant_value":true},"skip_final_snapshot":{"constant_value":true},"username":{"references":["var.db_username"]},"vpc_security_group_ids":{"references":["var.security_group_ids"]}},"schema_version":2},{"address":"aws_db_subnet_group.main","mode":"managed","type":"aws_db_subnet_group","name":"main","provider_config_key":"aws","expressions":{"name":{"constant_value":"rds-subnet-group"},"subnet_ids":{"references":["var.subnet_ids"]}},"schema_version":0},{"address":"aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"Permitir acesso ao PostgreSQL"},"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":5432,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","security_groups":null,"self":null,"to_port":5432}]},"name":{"constant_value":"rds-security-group"}},"schema_version":1}],"variables":{"db_host":{"description":"Endpoint do RDS"},"db_password":{"description":"Senha do banco de dados","sensitive":true},"db_username":{"description":"Usuário do banco de dados"},"security_group_ids":{"description":"Lista de Security Groups para o RDS"},"subnet_ids":{"description":"Lista de subnets para o RDS"}}}},"sns":{"source":"./modules/sns","expressions":{"contract_sqs_arn":{"references":["module.sqs.contract_queue_arn","module.sqs"]},"contract_sqs_url":{"references":["module.sqs.contract_queue_url","module.sqs"]}},"module":{"outputs":{"sns_proposal_arn":{"expression":{"references":["aws_sns_topic.proposal_sns_topic.arn","aws_sns_topic.proposal_sns_topic"]}}},"resources":[{"address":"aws_sns_topic.proposal_sns_topic","mode":"managed","type":"aws_sns_topic","name":"proposal_sns_topic","provider_config_key":"aws","expressions":{"name":{"constant_value":"proposal_sns_topic"}},"schema_version":0},{"address":"aws_sns_topic_subscription.sqs_subscription","mode":"managed","type":"aws_sns_topic_subscription","name":"sqs_subscription","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.contract_sqs_arn"]},"protocol":{"constant_value":"sqs"},"topic_arn":{"references":["aws_sns_topic.proposal_sns_topic.arn","aws_sns_topic.proposal_sns_topic"]}},"schema_version":0},{"address":"aws_sqs_queue_policy.sns_to_sqs_policy","mode":"managed","type":"aws_sqs_queue_policy","name":"sns_to_sqs_policy","provider_config_key":"aws","expressions":{"policy":{"references":["var.contract_sqs_arn","aws_sns_topic.proposal_sns_topic.arn","aws_sns_topic.proposal_sns_topic"]},"queue_url":{"references":["var.contract_sqs_url"]}},"schema_version":1}],"variables":{"contract_sqs_arn":{"description":"ARN da fila SQS de contratação"},"contract_sqs_url":{"description":"URL da fila SQS de contratação"}}}},"sqs":{"source":"./modules/sqs","expressions":{"contract_queue_arn":{"references":["module.sqs.contract_queue_arn","module.sqs"]},"process_sqs_postgres_arn":{"references":["module.lambda.process_sqs_postgres_arn","module.lambda"]}},"module":{"outputs":{"contract_dlq_name":{"expression":{"references":["aws_sqs_queue.contract_dlq.name","aws_sqs_queue.contract_dlq"]}},"contract_queue_arn":{"expression":{"references":["aws_sqs_queue.contract_queue.arn","aws_sqs_queue.contract_queue"]}},"contract_queue_url":{"expression":{"references":["aws_sqs_queue.contract_queue.id","aws_sqs_queue.contract_queue"]}}},"resources":[{"address":"aws_iam_policy.sqs_policy","mode":"managed","type":"aws_iam_policy","name":"sqs_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Permissões para acessar filas SQS"},"name":{"constant_value":"sqs-policy"},"policy":{"references":["aws_sqs_queue.contract_queue.arn","aws_sqs_queue.contract_queue","aws_sqs_queue.contract_dlq.arn","aws_sqs_queue.contract_dlq","aws_sqs_queue.status_queue.arn","aws_sqs_queue.status_queue","aws_sqs_queue.status_dlq.arn","aws_sqs_queue.status_dlq"]}},"schema_version":0},{"address":"aws_lambda_event_source_mapping.sqs_trigger","mode":"managed","type":"aws_lambda_event_source_mapping","name":"sqs_trigger","provider_config_key":"aws","expressions":{"batch_size":{"constant_value":10},"event_source_arn":{"references":["var.contract_queue_arn"]},"function_name":{"references":["var.process_sqs_postgres_arn"]}},"schema_version":0},{"address":"aws_sqs_queue.contract_dlq","mode":"managed","type":"aws_sqs_queue","name":"contract_dlq","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":1209600},"name":{"constant_value":"contract-dlq"}},"schema_version":0},{"address":"aws_sqs_queue.contract_queue","mode":"managed","type":"aws_sqs_queue","name":"contract_queue","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":86400},"name":{"constant_value":"contract-queue"},"receive_wait_time_seconds":{"constant_value":5},"redrive_policy":{"references":["aws_sqs_queue.contract_dlq.arn","aws_sqs_queue.contract_dlq"]},"visibility_timeout_seconds":{"constant_value":30}},"schema_version":0},{"address":"aws_sqs_queue.status_dlq","mode":"managed","type":"aws_sqs_queue","name":"status_dlq","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":1209600},"name":{"constant_value":"status-dlq"}},"schema_version":0},{"address":"aws_sqs_queue.status_queue","mode":"managed","type":"aws_sqs_queue","name":"status_queue","provider_config_key":"aws","expressions":{"message_retention_seconds":{"constant_value":86400},"name":{"constant_value":"status-queue"},"receive_wait_time_seconds":{"constant_value":5},"redrive_policy":{"references":["aws_sqs_queue.status_dlq.arn","aws_sqs_queue.status_dlq"]},"visibility_timeout_seconds":{"constant_value":30}},"schema_version":0}],"variables":{"contract_queue_arn":{"description":"ARN da fila SQS de contratação"},"process_sqs_postgres_arn":{"description":"ARN da Lambda que processa a SQS"}}}},"vpc":{"source":"./modules/vpc","expressions":{"allowed_ip":{"constant_value":"192.168.1.1/32"},"az1":{"constant_value":"us-east-1a"},"az2":{"constant_value":"us-east-1b"},"private_subnet_1_cidr":{"constant_value":"10.0.3.0/24"},"private_subnet_2_cidr":{"constant_value":"10.0.4.0/24"},"public_subnet_1_cidr":{"constant_value":"10.0.1.0/24"},"public_subnet_2_cidr":{"constant_value":"10.0.2.0/24"},"vpc_cidr":{"constant_value":"10.0.0.0/16"}},"module":{"outputs":{"private_subnet_ids":{"expression":{"references":["aws_subnet.private_1.id","aws_subnet.private_1","aws_subnet.private_2.id","aws_subnet.private_2"]}},"public_subnet_ids":{"expression":{"references":["aws_subnet.public_1.id","aws_subnet.public_1","aws_subnet.public_2.id","aws_subnet.public_2"]}},"rds_security_group_id":{"expression":{"references":["aws_security_group.rds_sg.id","aws_security_group.rds_sg"]}},"vpc_id":{"expression":{"references":["aws_vpc.main.id","aws_vpc.main"]}}},"resources":[{"address":"aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_config_key":"aws","expressions":{"tags":{"constant_value":{"Name":"Internet Gateway"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.gw.id","aws_internet_gateway.gw"]},"tags":{"constant_value":{"Name":"Public Route Table"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table_association.public_1","mode":"managed","type":"aws_route_table_association","name":"public_1","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public_1.id","aws_subnet.public_1"]}},"schema_version":0},{"address":"aws_route_table_association.public_2","mode":"managed","type":"aws_route_table_association","name":"public_2","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public_2.id","aws_subnet.public_2"]}},"schema_version":0},{"address":"aws_security_group.rds_sg","mode":"managed","type":"aws_security_group","name":"rds_sg","provider_config_key":"aws","expressions":{"egress":{"constant_value":[{"cidr_blocks":["0.0.0.0/0"],"description":null,"from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","security_groups":null,"self":null,"to_port":0}]},"ingress":{"references":["var.allowed_ip"]},"tags":{"constant_value":{"Name":"RDS Security Group"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_subnet.private_1","mode":"managed","type":"aws_subnet","name":"private_1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.az1"]},"cidr_block":{"references":["var.private_subnet_1_cidr"]},"tags":{"constant_value":{"Name":"Private Subnet 1"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_subnet.private_2","mode":"managed","type":"aws_subnet","name":"private_2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.az2"]},"cidr_block":{"references":["var.private_subnet_2_cidr"]},"tags":{"constant_value":{"Name":"Private Subnet 2"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_subnet.public_1","mode":"managed","type":"aws_subnet","name":"public_1","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.az1"]},"cidr_block":{"references":["var.public_subnet_1_cidr"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"constant_value":{"Name":"Public Subnet 1"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_subnet.public_2","mode":"managed","type":"aws_subnet","name":"public_2","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.az2"]},"cidr_block":{"references":["var.public_subnet_2_cidr"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"constant_value":{"Name":"Public Subnet 2"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"constant_value":{"Name":"main-vpc"}}},"schema_version":1}],"variables":{"allowed_ip":{"description":"IP permitido para acessar o banco de dados"},"az1":{"description":"Zona de Disponibilidade 1"},"az2":{"description":"Zona de Disponibilidade 2"},"private_subnet_1_cidr":{"description":"CIDR da Subnet Privada 1"},"private_subnet_2_cidr":{"description":"CIDR da Subnet Privada 2"},"public_subnet_1_cidr":{"description":"CIDR da Subnet Pública 1"},"public_subnet_2_cidr":{"description":"CIDR da Subnet Pública 2"},"vpc_cidr":{"description":"CIDR da VPC"}}}}}}},"relevant_attributes":[{"resource":"module.lambda.aws_lambda_function.process_sqs_postgres","attribute":["arn"]},{"resource":"module.sqs.aws_sqs_queue.contract_dlq","attribute":["name"]},{"resource":"module.sqs.aws_sqs_queue.contract_queue","attribute":["id"]},{"resource":"module.vpc.aws_security_group.rds_sg","attribute":["id"]},{"resource":"module.vpc.aws_subnet.private_2","attribute":["id"]},{"resource":"module.api_gateway.aws_api_gateway_deployment.deployment","attribute":["invoke_url"]},{"resource":"module.rds.aws_db_instance.postgresql","attribute":["address"]},{"resource":"module.vpc.aws_subnet.private_1","attribute":["id"]},{"resource":"module.vpc.aws_vpc.main","attribute":["id"]},{"resource":"module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","attribute":["arn"]},{"resource":"module.lambda.module.lambda_layer.aws_lambda_layer_version.psycopg2_layer","attribute":["arn"]},{"resource":"module.sns.aws_sns_topic.proposal_sns_topic","attribute":["arn"]},{"resource":"module.dynamodb.aws_dynamodb_table.proposals","attribute":["name"]},{"resource":"module.lambda.aws_lambda_function.store_proposal","attribute":["invoke_arn"]},{"resource":"module.lambda.aws_iam_role.lambda_exec","attribute":["arn"]},{"resource":"module.vpc.aws_subnet.public_1","attribute":["id"]},{"resource":"module.vpc.aws_subnet.public_2","attribute":["id"]},{"resource":"module.api_gateway.aws_api_gateway_rest_api.proposal_api","attribute":["execution_arn"]},{"resource":"module.sqs.aws_sqs_queue.contract_queue","attribute":["arn"]}],"timestamp":"2025-01-17T05:19:38Z","errored":false}
